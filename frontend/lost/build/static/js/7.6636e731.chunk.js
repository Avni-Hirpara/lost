(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1017:function(e,t,n){"use strict";n.r(t);var o=n(11),a=n(14),s=n(20),i=n(19),r=n(21),l=n(1),c=n.n(l),u=n(5),p=n.n(u),d=n(10),h=n(2),f=n(7),v=n.n(f),m=n(9),g=n(23),b=n(26),y=(n(235),n(37)),k=n(671),C=(n(535),n(974)),M=n(973),w=n(508),S=n.n(w),A=n(553),O=function(e){function FilterInfoBox(e){var t;return Object(o.a)(this,FilterInfoBox),(t=Object(s.a)(this,Object(i.a)(FilterInfoBox).call(this,e))).state={},t}return Object(r.a)(FilterInfoBox,e),Object(a.a)(FilterInfoBox,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidUpdate",value:function componentDidUpdate(e){}},{key:"renderMeta",value:function renderMeta(){if(this.props.anno.id)return c.a.createElement(C.a.Meta,null,"Type: ",this.props.anno.type," ")}},{key:"handleIterationChange",value:function handleIterationChange(e,t){console.log("Iteration Changed",e,t),this.props.onIterationChange&&this.props.onIterationChange(t.value)}},{key:"onDismiss",value:function onDismiss(){this.props.onDismiss&&this.props.onDismiss()}},{key:"renderDescription",value:function renderDescription(){var e=this;return c.a.createElement(M.a,{placeholder:"Filter iteration",icon:"filter",floating:!0,search:!0,selection:!0,options:function getOptions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Iteration ";return S.a.times(e,function(e){return{key:e,text:"".concat(t).concat(e),value:e}})}(this.props.options.max_iteration+1),onChange:function onChange(t,n){return e.handleIterationChange(t,n)}})}},{key:"render",value:function render(){var e=this;return c.a.createElement(A.a,{header:"Filter Info",content:this.renderDescription(),visible:this.props.visible,defaultPos:this.props.defaultPos,onDismiss:function onDismiss(){return e.onDismiss()}})}}]),FilterInfoBox}(l.Component),I=n(976),x=n(68),E=n(975),D=n(669),j=n(533),N=n(534),L=n(670),P=b.a.siaGetNextImage,T=b.a.siaGetPrevImage,U=b.a.siaSetFullscreen,R=b.a.selectAnnotation,B=b.a.siaShowImgLabelInput,H=b.a.siaSetTaskFinished,F=b.a.siaLayoutUpdate,_=b.a.siaImgIsJunk,V=function(e){function ToolBar(e){var t;return Object(o.a)(this,ToolBar),(t=Object(s.a)(this,Object(i.a)(ToolBar).call(this,e))).state={fullscreenMode:!1,position:{left:0,top:5,width:40},showFinishPrompt:!1,showHelp:!1},t.toolBarGroup=c.a.createRef(),t}return Object(r.a)(ToolBar,e),Object(a.a)(ToolBar,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){t.fullscreenMode!==this.state.fullscreenMode&&this.props.siaSetFullscreen(this.state.fullscreenMode),this.props.layoutUpdate!==e.layoutUpdate&&this.calcPosition(),this.props.svg!==e.svg&&this.calcPosition()}},{key:"onClick",value:function onClick(e,t){this.props.onToolSelected&&this.props.onToolSelected(t)}},{key:"calcPosition",value:function calcPosition(){if(this.toolBarGroup.current.getBoundingClientRect()&&this.props.svg){var e;e=this.props.svg.top,this.setState({position:Object(h.a)({},this.state.position,{left:this.props.svg.left-50,top:e})})}}},{key:"getNextImg",value:function getNextImg(){this.props.onNextImage&&this.props.onNextImage(this.props.currentImage.id)}},{key:"getPrevImg",value:function getPrevImg(){this.props.onPrevImage&&this.props.onPrevImage(this.props.currentImage.id)}},{key:"setFinished",value:function setFinished(){this.props.siaSetTaskFinished()}},{key:"toggleFinishPrompt",value:function toggleFinishPrompt(){this.setState({showFinishPrompt:!this.state.showFinishPrompt})}},{key:"toggleFullscreen",value:function toggleFullscreen(){this.props.onToggleFullscreen&&this.props.onToggleFullscreen()}},{key:"toggleImgLabelInput",value:function toggleImgLabelInput(){this.props.onToggleImgLabelInput&&this.props.onToggleImgLabelInput()}},{key:"toggleJunk",value:function toggleJunk(){this.props.onToggleJunk&&this.props.onToggleJunk()}},{key:"toggleHelp",value:function toggleHelp(){this.setState({showHelp:!this.state.showHelp})}},{key:"saveAnnos",value:function saveAnnos(){this.props.onSaveAnnos&&this.props.onSaveAnnos()}},{key:"handleOnDeleteAllAnnos",value:function handleOnDeleteAllAnnos(){this.props.onDeleteAllAnnos&&this.props.onDeleteAllAnnos()}},{key:"renderToolButtons",value:function renderToolButtons(){var e=this;if(!this.props.allowedActions.draw)return null;var t=[];return this.props.allowedTools.point&&t.push(c.a.createElement(I.a.Item,{name:"dot circle",key:N.c,active:this.props.selectedTool===N.c,onClick:function onClick(t){return e.onClick(t,N.c)}},L.c())),this.props.allowedTools.line&&t.push(c.a.createElement(I.a.Item,{name:"paint brush",key:N.b,active:this.props.selectedTool===N.b,onClick:function onClick(t){return e.onClick(t,N.b)}},L.b())),this.props.allowedTools.bbox&&t.push(c.a.createElement(I.a.Item,{name:"square outline",key:N.a,active:this.props.selectedTool===N.a,onClick:function onClick(t){return e.onClick(t,N.a)}},L.a())),this.props.allowedTools.polygon&&t.push(c.a.createElement(I.a.Item,{name:"pencil alternate",key:N.d,active:this.props.selectedTool===N.d,onClick:function onClick(t){return e.onClick(t,N.d)}},L.d())),t}},{key:"renderFinishPrompt",value:function renderFinishPrompt(){var e=this;return c.a.createElement(j.a,{active:this.state.showFinishPrompt,header:c.a.createElement("div",null,c.a.createElement(x.a,{name:"paper plane outline"}),"Do you wish to FINISH this SIA Task?"),content:c.a.createElement("div",null,c.a.createElement(E.a,{basic:!0,color:"green",inverted:!0,onClick:function onClick(){return e.setFinished()}},c.a.createElement(x.a,{name:"check"}),"Yes"),c.a.createElement(E.a,{basic:!0,color:"red",inverted:!0,onClick:function onClick(){return e.toggleFinishPrompt()}},c.a.createElement(x.a,{name:"ban"})," No"))})}},{key:"renderNavigation",value:function renderNavigation(){var e=this,t=[];return this.props.currentImage&&(t.push(c.a.createElement(I.a.Item,{name:"arrow right",key:"next",active:!1,onClick:function onClick(){return e.getNextImg()},disabled:this.props.currentImage.isLast},c.a.createElement(x.a,{name:"arrow right"}))),t.push(c.a.createElement(I.a.Item,{name:"arrow left",key:"prev",active:!1,onClick:function onClick(){return e.getPrevImg()},disabled:this.props.currentImage.isFirst},c.a.createElement(x.a,{name:"arrow left"})))),t}},{key:"renderJunkButton",value:function renderJunkButton(){var e=this;return c.a.createElement(I.a.Item,{name:"ban",key:"junk",active:this.props.isJunk,onClick:function onClick(){return e.toggleJunk()}},c.a.createElement(x.a,{name:"ban"}))}},{key:"renderDeleteAllAnnosButton",value:function renderDeleteAllAnnosButton(){var e=this;return c.a.createElement(I.a.Item,{name:"trash alternate outline",key:"deleteAllAnnos",onClick:function onClick(){return e.handleOnDeleteAllAnnos()}},c.a.createElement(x.a,{name:"trash alternate outline"}))}},{key:"renderHelpButton",value:function renderHelpButton(){var e=this;return c.a.createElement(I.a.Item,{name:"help",key:"help",active:!1,onClick:function onClick(){return e.toggleHelp()}},c.a.createElement(x.a,{name:"help"}),c.a.createElement(j.a,{active:this.state.showHelp,content:c.a.createElement("div",null,c.a.createElement(C.a.Group,null,c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"How to draw?"}),c.a.createElement(C.a.Content,{description:"1.) Select a Tool in the toolbar 2.) Draw with RIGHT CLICK on Canvas"})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"How to delete an annotation?"}),c.a.createElement(C.a.Content,{description:"1.) Select an annotation with LEFT CLICK 2.) Press DELETE or BACKSPACE"})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"How to assign a label?"}),c.a.createElement(C.a.Content,{description:"1.) Select an annotation with LEFT CLICK 2.) Hit ENTER 3.) Type into the input field 4.) Hit ENTER to confirm 5.) Hit ESCAPE to close the input field"})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"Undo/ Redo"}),c.a.createElement(C.a.Content,{description:"Undo: Hit STRG + Z"}),c.a.createElement(C.a.Content,{description:"Redo: Hit STRG + R"})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"Add a node to Line/Polygon"}),c.a.createElement(C.a.Content,{description:"Hit STRG + Click left on the line"})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"Zoom/ Move Canvas"}),c.a.createElement(C.a.Content,{description:"Zoom: Use MOUSE WHEEL to zoom in/out"}),c.a.createElement(C.a.Content,{description:"Move: Hold MOUSE WHEEL and move mouse. Or Use W/A/S/D keys to move camera up/left/down/right"})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"TAB navigation"}),c.a.createElement(C.a.Content,{description:"You can traverse all visible annotation by hitting TAB."})),c.a.createElement(C.a,null,c.a.createElement(C.a.Content,{header:"Next/Prev image navigation"}),c.a.createElement(C.a.Content,{description:"Get next image by hitting ARROW_RIGHT key. Get previous image by hitting ARROW_LEFT key."}))))}))}},{key:"renderImgLabelInput",value:function renderImgLabelInput(){var e=this;if(this.props.canvasConfig.img.actions.label)return c.a.createElement(I.a.Item,{name:"img label input",active:this.props.imgLabelInput.show,onClick:function onClick(){return e.toggleImgLabelInput()}},L.e())}},{key:"render",value:function render(){var e=this;return c.a.createElement("div",{ref:this.toolBarGroup,style:{position:"fixed",top:this.state.position.top,left:this.state.position.left}},c.a.createElement(I.a,{icon:!0,inverted:!0,vertical:!0},c.a.createElement(I.a.Item,{name:"save",key:"save",onClick:function onClick(){return e.saveAnnos()}},c.a.createElement(x.a,{name:"save",color:"red"})),this.renderImgLabelInput(),this.renderNavigation(),this.renderToolButtons(),c.a.createElement(I.a.Item,{name:"expand arrows alternate",active:this.props.fullscreenMode,onClick:function onClick(){return e.toggleFullscreen()}},c.a.createElement(x.a,{name:"expand arrows alternate"})),this.renderJunkButton(),this.renderDeleteAllAnnosButton(),c.a.createElement(D.a,null),this.renderHelpButton()))}}]),ToolBar}(l.Component);var W=Object(g.b)(function mapStateToProps(e){return{fullscreenMode:e.sia.fullscreenMode,annos:e.sia.annos,appliedFullscreen:e.sia.appliedFullscreen,layoutUpdate:e.sia.layoutUpdate,imgLabelInput:e.sia.imgLabelInput,allowedTools:e.sia.config.tools,allowedActions:e.sia.config.annos.actions,selectedTool:e.sia.selectedTool,isJunk:e.sia.isJunk,canvasConfig:e.sia.config}},{siaGetNextImage:P,siaGetPrevImage:T,siaSetFullscreen:U,selectAnnotation:R,siaShowImgLabelInput:B,siaSetTaskFinished:H,siaLayoutUpdate:F,siaImgIsJunk:_})(V),K=n(506),q=(n(507),n(485)),Y=b.a.siaLayoutUpdate,G=b.a.getSiaImage,X=b.a.siaImgIsJunk,z=b.a.getSiaReviewAnnos,J=b.a.getSiaReviewOptions,Z=b.a.siaReviewResetAnnos,$=function(e){function SIAReview(e){var t;return Object(o.a)(this,SIAReview),(t=Object(s.a)(this,Object(i.a)(SIAReview).call(this,e))).state={fullscreenCSS:"",layoutOffset:{left:20,top:0,bottom:5,right:5},svg:void 0,tool:"bBox",imgLabelInputVisible:!1,isJunk:!1,image:{id:null,data:null},iteration:null},t.siteHistory=Object(y.a)(),t.container=c.a.createRef(),t.canvas=c.a.createRef(),t}return Object(r.a)(SIAReview,e),Object(a.a)(SIAReview,[{key:"resetCanvas",value:function resetCanvas(){this.setState({imgLabelInputVisible:!1})}},{key:"handleSetSVG",value:function handleSetSVG(e){this.setState({svg:Object(h.a)({},e)})}},{key:"handleToolSelected",value:function handleToolSelected(e){this.setState({tool:e})}},{key:"handleToggleImgLabelInput",value:function handleToggleImgLabelInput(){this.setState({imgLabelInputVisible:!this.state.imgLabelInputVisible})}},{key:"handleToggleJunk",value:function handleToggleJunk(){this.props.siaImgIsJunk(!this.props.isJunk)}},{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("resize",this.props.siaLayoutUpdate);var e={direction:"first",image_anno_id:null,iteration:null,pe_id:this.props.pipeElementId};this.props.getSiaReviewOptions(this.props.pipeElementId),this.props.getSiaReviewAnnos(e)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.props.siaLayoutUpdate)}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){if(this.props.annos){if(!this.props.annos.image)return;e.annos?this.props.annos.image.id!==e.annos.image.id&&this.requestImageFromBackend():this.requestImageFromBackend()}this.state.fullscreenCSS!==t.fullscreenCSS&&this.props.siaLayoutUpdate(),e.annos!==this.props.annos&&this.props.annos&&this.props.siaImgIsJunk(this.props.annos.image.isJunk)}},{key:"requestImageFromBackend",value:function requestImageFromBackend(){var e=this;this.props.getSiaImage(this.props.annos.image.url).then(function(t){e.setState({image:{id:e.props.annos.image.id,data:window.URL.createObjectURL(t)}}),e.canvas.current&&e.canvas.current.resetZoom()})}},{key:"handleNextPrevImage",value:function handleNextPrevImage(e,t){var n={direction:t,image_anno_id:e,iteration:this.state.iteration,pe_id:this.props.pipeElementId};this.props.getSiaReviewOptions(this.props.pipeElementId),this.props.getSiaReviewAnnos(n)}},{key:"handleSaveAnnos",value:function(){var e=Object(d.a)(p.a.mark(function _callee(){var e,t;return p.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=this.canvas.current.getAnnos(),n.next=4,v.a.post(m.a+"/sia/reviewupdate/"+this.props.pipeElementId,e);case 4:t=n.sent,console.log("REQUEST: siaReviewUpdate ",t),this.handleNotification({title:"Saved",message:"Annotations have been saved!",type:q.b}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),this.handleNotification({title:"Could not save!!!",message:"Server Error",type:q.a});case 13:case"end":return n.stop()}},_callee,this,[[0,9]])}));return function handleSaveAnnos(){return e.apply(this,arguments)}}()},{key:"handleNotification",value:function handleNotification(e){if(e)switch(e.type){case q.d:K.NotificationManager.warning(e.message,e.title,5e3);break;case q.b:K.NotificationManager.info(e.message,e.title,5e3);break;case q.a:K.NotificationManager.error(e.message,e.title,5e3);break;case q.c:K.NotificationManager.success(e.message,e.title,5e3)}}},{key:"toggleFullscreen",value:function toggleFullscreen(){console.log("Toggle Fullscreen"),"sia-fullscreen"!==this.state.fullscreenCSS?this.setState({fullscreenCSS:"sia-fullscreen",layoutOffset:Object(h.a)({},this.state.layoutOffset,{left:50,top:5})}):""!==this.state.fullscreenCSS&&this.setState({fullscreenCSS:"",layoutOffset:Object(h.a)({},this.state.layoutOffset,{left:20,top:0})})}},{key:"handleCanvasKeyDown",value:function handleCanvasKeyDown(e){if(console.log("Canvas keyDown: ",e.key),this.props.annos&&this.props.annos.image)switch(e.key){case"ArrowLeft":this.props.annos.image.isFirst?this.handleNotification({title:"No previous image",message:"This is the first image!",type:q.d}):this.handleNextPrevImage(this.props.annos.image.id,"previous");break;case"ArrowRight":this.props.annos.image.isLast?this.handleNotification({title:"No next image",message:"This is the last image!",type:q.d}):this.handleNextPrevImage(this.props.annos.image.id,"next")}}},{key:"handleIterationChange",value:function handleIterationChange(e){this.setState({iteration:e}),console.log("iteration",e);var t={direction:"first",image_anno_id:null,iteration:e,pe_id:this.props.pipeElementId};this.props.siaReviewResetAnnos(),this.props.getSiaReviewAnnos(t)}},{key:"renderFilter",value:function renderFilter(){var e=this;return this.props.filterOptions?c.a.createElement(O,{visible:!0,options:this.props.filterOptions,onIterationChange:function onIterationChange(t){return e.handleIterationChange(t)}}):null}},{key:"renderCanvas",value:function renderCanvas(){var e=this;return this.props.annos&&this.props.filterOptions?c.a.createElement("div",null,c.a.createElement(W,{svg:this.state.svg,currentImage:this.props.annos.image,onToolSelected:function onToolSelected(t){return e.handleToolSelected(t)},onToggleImgLabelInput:function onToggleImgLabelInput(){return e.handleToggleImgLabelInput()},onToggleJunk:function onToggleJunk(){return e.handleToggleJunk()},onNextImage:function onNextImage(t){return e.handleNextPrevImage(t,"next")},onPrevImage:function onPrevImage(t){return e.handleNextPrevImage(t,"previous")},onToggleFullscreen:function onToggleFullscreen(){return e.toggleFullscreen()},onDeleteAllAnnos:function onDeleteAllAnnos(){return e.canvas.current.deleteAllAnnos()},onSaveAnnos:function onSaveAnnos(){return e.handleSaveAnnos()}}),c.a.createElement(k.a,{ref:this.canvas,imgBarVisible:!0,imgLabelInputVisible:this.state.imgLabelInputVisible,container:this.container,annos:this.props.annos,image:this.state.image,uiConfig:this.props.uiConfig,layoutUpdate:this.props.layoutUpdate,selectedTool:this.state.tool,canvasConfig:{tools:{point:!0,line:!0,polygon:!0,bbox:!0,junk:!0},annos:{minArea:20,multilabels:!0,actions:{draw:!0,label:!0,edit:!0}},img:{multilabels:!0,actions:{label:!0}}},possibleLabels:this.props.filterOptions.possible_labels,onSVGUpdate:function onSVGUpdate(t){return e.handleSetSVG(t)},layoutOffset:this.state.layoutOffset,isJunk:this.props.isJunk,onImgLabelInputClose:function onImgLabelInputClose(){return e.handleToggleImgLabelInput()},centerCanvasInContainer:!1,onNotification:function onNotification(t){return e.handleNotification(t)},onKeyDown:function onKeyDown(t){return e.handleCanvasKeyDown(t)}})):"No Review Data!"}},{key:"render",value:function render(){return c.a.createElement("div",{className:this.state.fullscreenCSS,ref:this.container},this.renderCanvas(),this.renderFilter(),c.a.createElement(K.NotificationContainer,null))}}]),SIAReview}(l.Component);var Q=Object(g.b)(function SIAReview_mapStateToProps(e){return{uiConfig:e.sia.uiConfig,layoutUpdate:e.sia.layoutUpdate,isJunk:e.sia.isJunk,pipeElementId:e.siaReview.elementId,annos:e.siaReview.annos,filterOptions:e.siaReview.options}},{siaLayoutUpdate:Y,getSiaImage:G,getSiaReviewAnnos:z,getSiaReviewOptions:J,siaImgIsJunk:X,siaReviewResetAnnos:Z},null,{})($),ee=function(e){function SiaReview(){return Object(o.a)(this,SiaReview),Object(s.a)(this,Object(i.a)(SiaReview).apply(this,arguments))}return Object(r.a)(SiaReview,e),Object(a.a)(SiaReview,[{key:"render",value:function render(){return c.a.createElement(Q,null)}}]),SiaReview}(l.Component);t.default=ee},438:function(e,t,n){"use strict";function toSia(e,t,n){switch(console.info("toSia data",e),console.info("toSia image",t),n){case"bBox":var o=t.width*e.w,a=t.height*e.h,s=t.width*e.x-o/2,i=t.height*e.y-a/2;return[{x:s,y:i},{x:s+o,y:i},{x:s+o,y:i+a},{x:s,y:i+a}];case"point":return[{x:t.width*e.x,y:t.height*e.y}];case"line":case"polygon":return e.map(function(e){return{x:t.width*e.x,y:t.height*e.y}})}}function toBackend(e,t,n){switch(n){case"bBox":var o=e[1].x-e[0].x,a=e[2].y-e[0].y,s=e[0].x+o/2,i=e[0].y+a/2;return{x:s/t.width,y:i/t.height,w:o/t.width,h:a/t.height};case"point":return{x:e[0].x/t.width,y:e[0].y/t.height};case"line":case"polygon":return e.map(function(e){return{x:e.x/t.width,y:e.y/t.height}});default:console.warn("Wrong annotation type!")}}function getArea(e,t,n,o){var a=toBackend(e,t,n);switch(n){case"bBox":return Math.abs(a.w*a.h)*o.width*o.height;case"line":case"point":return;case"polygon":var s=0;if(a.length>2)for(var i=a.length-1,r=0;r<a.length;r++)s+=(a[i].x+a[r].x)*(a[i].y-a[r].y),i=r;return Math.abs(s/2)*o.width*o.height;default:return void console.warn("Wrong annotation type!")}}function move(e,t,n){return e.map(function(e){return{x:e.x+t,y:e.y+n}})}function getBox(e,t){switch(t){case"bBox":return e;case"point":case"line":case"polygon":var n=0,o=0,a=1/0,s=1/0;return e.forEach(function(e){e.x>n&&(n=e.x),e.y>o&&(o=e.y),e.x<a&&(a=e.x),e.y<s&&(s=e.y)}),[{x:a,y:s},{x:n,y:s},{x:a,y:o},{x:n,y:o}]}}function getMonstLeftPoint(e){var t=1/0,n=[];return e.forEach(function(e){e.x<t?(t=e.x,(n=[]).push(e)):e.x===t&&n.push(e)}),n}function getTopPoint(e){var t=1/0,n=[];return e.forEach(function(e){e.y<t?(t=e.y,(n=[]).push(e)):e.y===t&&n.push(e)}),n}function correctAnnotation(e,t){return e.map(function(e){var n=e.x,o=e.y;return e.x<=0?n=0:e.x>t.width&&(n=t.width),e.y<0?o=0:e.y>t.height&&(o=t.height),{x:n,y:o}})}n.d(t,"h",function(){return toSia}),n.d(t,"g",function(){return toBackend}),n.d(t,"b",function(){return getArea}),n.d(t,"f",function(){return move}),n.d(t,"c",function(){return getBox}),n.d(t,"d",function(){return getMonstLeftPoint}),n.d(t,"e",function(){return getTopPoint}),n.d(t,"a",function(){return correctAnnotation})},460:function(e,t,n){},485:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return i});var o="info",a="success",s="warning",i="error"},486:function(e,t){e.exports=function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},499:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function hasClass(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},533:function(e,t,n){"use strict";var o=n(11),a=n(14),s=n(20),i=n(19),r=n(21),l=n(1),c=n.n(l),u=n(977),p=n(979),d=function(e){function Prompt(e){var t;return Object(o.a)(this,Prompt),(t=Object(s.a)(this,Object(i.a)(Prompt).call(this,e))).state={active:!1},t}return Object(r.a)(Prompt,e),Object(a.a)(Prompt,[{key:"handleClick",value:function handleClick(e){this.props.onClick&&this.props.onClick(e)}},{key:"componentDidMount",value:function componentDidMount(){this.setState({active:this.props.active})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.active!==e.active&&this.setState({active:this.props.active})}},{key:"render",value:function render(){var e=this;return c.a.createElement(u.a,{page:!0,active:this.state.active,style:{zIndex:2e3},onClick:function onClick(t){return e.handleClick(t)}},c.a.createElement(p.a,{as:"h3",inverted:!0},this.props.header),this.props.content)}}]),Prompt}(l.Component);t.a=d},534:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return i});var o="point",a="bBox",s="line",i="polygon"},535:function(e,t,n){},539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function addClass(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(499));e.exports=t.default},540:function(e,t,n){"use strict";function replaceClassName(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function removeClass(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=replaceClassName(e.className,t):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",t))}},553:function(e,t,n){"use strict";var o=n(2),a=n(11),s=n(14),i=n(20),r=n(19),l=n(21),c=n(1),u=n.n(c),p=n(421),d=n.n(p),h=n(425),f=n.n(h),v=n(426),m=n.n(v),g=n(428),b=n.n(g),y=n(427),k=n.n(y),C=n(424),M=n.n(C),w=n(429),S=n.n(w),A=n(423),O=n.n(A),I=n(152),x=n.n(I),E=(n(432),n(4)),D=n.n(E),j=(n(0),n(465)),N=n(704),L=n(705),P=n(422),T=n(706),U=n(68);function MessageContent(e){var t=e.children,n=e.className,o=e.content,a=D()("content",n),s=Object(N.a)(MessageContent,e),i=Object(L.a)(MessageContent,e);return u.a.createElement(i,d()({},s,{className:a}),P.a.isNil(t)?o:t)}MessageContent.handledProps=["as","children","className","content"],MessageContent.propTypes={};var R=MessageContent;function MessageHeader(e){var t=e.children,n=e.className,o=e.content,a=D()("header",n),s=Object(N.a)(MessageHeader,e),i=Object(L.a)(MessageHeader,e);return u.a.createElement(i,d()({},s,{className:a}),P.a.isNil(t)?o:t)}MessageHeader.handledProps=["as","children","className","content"],MessageHeader.propTypes={},MessageHeader.create=Object(T.e)(MessageHeader,function(e){return{content:e}});var B=MessageHeader,H=n(441),F=n.n(H);function MessageItem(e){var t=e.children,n=e.className,o=e.content,a=D()("content",n),s=Object(N.a)(MessageItem,e),i=Object(L.a)(MessageItem,e);return u.a.createElement(i,d()({},s,{className:a}),P.a.isNil(t)?o:t)}MessageItem.handledProps=["as","children","className","content"],MessageItem.propTypes={},MessageItem.defaultProps={as:"li"},MessageItem.create=Object(T.e)(MessageItem,function(e){return{content:e}});var _=MessageItem;function MessageList(e){var t=e.children,n=e.className,o=e.items,a=D()("list",n),s=Object(N.a)(MessageList,e),i=Object(L.a)(MessageList,e);return u.a.createElement(i,d()({},s,{className:a}),P.a.isNil(t)?F()(o,_.create):t)}MessageList.handledProps=["as","children","className","items"],MessageList.propTypes={},MessageList.defaultProps={as:"ul"},MessageList.create=Object(T.e)(MessageList,function(e){return{items:e}});var V=MessageList,W=function(e){function Message(){var e,t;f()(this,Message);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=b()(this,(e=k()(Message)).call.apply(e,[this].concat(o))),O()(M()(t),"handleDismiss",function(e){var n=t.props.onDismiss;n&&n(e,t.props)}),t}return S()(Message,e),m()(Message,[{key:"render",value:function render(){var e=this.props,t=e.attached,n=e.children,o=e.className,a=e.color,s=e.compact,i=e.content,r=e.error,l=e.floating,c=e.header,p=e.hidden,h=e.icon,f=e.info,v=e.list,m=e.negative,g=e.onDismiss,b=e.positive,y=e.size,k=e.success,C=e.visible,M=e.warning,w=D()("ui",a,y,Object(j.a)(s,"compact"),Object(j.a)(r,"error"),Object(j.a)(l,"floating"),Object(j.a)(p,"hidden"),Object(j.a)(h,"icon"),Object(j.a)(f,"info"),Object(j.a)(m,"negative"),Object(j.a)(b,"positive"),Object(j.a)(k,"success"),Object(j.a)(C,"visible"),Object(j.a)(M,"warning"),Object(j.b)(t,"attached"),"message",o),S=g&&u.a.createElement(U.a,{name:"close",onClick:this.handleDismiss}),A=Object(N.a)(Message,this.props),O=Object(L.a)(Message,this.props);return P.a.isNil(n)?u.a.createElement(O,d()({},A,{className:w}),S,U.a.create(h,{autoGenerateKey:!1}),(!x()(c)||!x()(i)||!x()(v))&&u.a.createElement(R,null,B.create(c,{autoGenerateKey:!1}),V.create(v,{autoGenerateKey:!1}),Object(T.c)(i,{autoGenerateKey:!1}))):u.a.createElement(O,d()({},A,{className:w}),S,n)}}]),Message}(c.Component);O()(W,"Content",R),O()(W,"Header",B),O()(W,"List",V),O()(W,"Item",_),O()(W,"handledProps",["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"]),W.propTypes={};var K=n(914),q=n(668),Y=n.n(q),G=function(e){function InfoBox(e){var t;return Object(a.a)(this,InfoBox),(t=Object(i.a)(this,Object(r.a)(InfoBox).call(this,e))).state={style:{position:"fixed",top:200,left:200,width:250}},t}return Object(l.a)(InfoBox,e),Object(s.a)(InfoBox,[{key:"componentDidMount",value:function componentDidMount(){this.updateStyle()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.defaultPos!==e.defaultPos&&this.updateStyle()}},{key:"handleOnStop",value:function handleOnStop(e){this.props.onStop&&this.props.onStop(e)}},{key:"updateStyle",value:function updateStyle(){this.setState({style:Object(o.a)({},this.state.style,this.props.defaultPos)})}},{key:"onDismiss",value:function onDismiss(e){this.props.onDismiss&&this.props.onDismiss(e)}},{key:"render",value:function render(){var e=this;return this.props.visible?u.a.createElement(Y.a,{handle:".handle",onStop:function onStop(t){return e.handleOnStop(t)}},u.a.createElement("div",{style:this.state.style},u.a.createElement(W,{style:{opacity:.98},onDismiss:function onDismiss(t){e.onDismiss(t)},size:"small"},u.a.createElement(W.Header,{className:"handle",style:{cursor:"grab"}},this.props.header),u.a.createElement(K.a,null),u.a.createElement(W.Content,null,this.props.content)))):null}}]),InfoBox}(c.Component);t.a=G},645:function(e,t){e.exports=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}},646:function(e,t,n){"use strict";t.__esModule=!0;var o=_interopRequireDefault(n(1)),a=_interopRequireDefault(n(647));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.createContext||a.default,e.exports=t.default},647:function(e,t,n){"use strict";t.__esModule=!0;var o=n(1),a=(_interopRequireDefault(o),_interopRequireDefault(n(0))),s=_interopRequireDefault(n(648));_interopRequireDefault(n(649));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=1073741823;t.default=function createReactContext(e,t){var n,r,l="__create-react-context-"+(0,s.default)()+"__",c=function(e){function Provider(){var t,n;_classCallCheck(this,Provider);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),n.emitter=function createEventEmitter(e){var t=[];return{on:function on(e){t.push(e)},off:function off(e){t=t.filter(function(t){return t!==e})},get:function get(){return e},set:function set(n,o){e=n,t.forEach(function(t){return t(e,o)})}}}(n.props.value),_possibleConstructorReturn(n,t)}return _inherits(Provider,e),Provider.prototype.getChildContext=function getChildContext(){var e;return(e={})[l]=this.emitter,e},Provider.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){if(this.props.value!==e.value){var n=this.props.value,o=e.value,a=void 0;!function objectIs(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,o)?(a="function"===typeof t?t(n,o):i,0!==(a|=0)&&this.emitter.set(e.value,a)):a=0}},Provider.prototype.render=function render(){return this.props.children},Provider}(o.Component);c.childContextTypes=((n={})[l]=a.default.object.isRequired,n);var u=function(t){function Consumer(){var e,n;_classCallCheck(this,Consumer);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=n=_possibleConstructorReturn(this,t.call.apply(t,[this].concat(a))),n.state={value:n.getValue()},n.onUpdate=function(e,t){0!==((0|n.observedBits)&t)&&n.setState({value:n.getValue()})},_possibleConstructorReturn(n,e)}return _inherits(Consumer,t),Consumer.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?i:t},Consumer.prototype.componentDidMount=function componentDidMount(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?i:e},Consumer.prototype.componentWillUnmount=function componentWillUnmount(){this.context[l]&&this.context[l].off(this.onUpdate)},Consumer.prototype.getValue=function getValue(){return this.context[l]?this.context[l].get():e},Consumer.prototype.render=function render(){return function onlyChild(e){return Array.isArray(e)?e[0]:e}(this.props.children)(this.state.value)},Consumer}(o.Component);return u.contextTypes=((r={})[l]=a.default.object,r),{Provider:c,Consumer:u}},e.exports=t.default},648:function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(this,n(61))},649:function(e,t,n){"use strict";var o=n(650);e.exports=o},650:function(e,t,n){"use strict";function makeEmptyFunction(e){return function(){return e}}var o=function emptyFunction(){};o.thatReturns=makeEmptyFunction,o.thatReturnsFalse=makeEmptyFunction(!1),o.thatReturnsTrue=makeEmptyFunction(!0),o.thatReturnsNull=makeEmptyFunction(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},651:function(e,t,n){"use strict";var o=n(459);t.a=o.instance},652:function(e,t,n){var o=n(249),a=n(653),s=n(115),i=Object.prototype.toString,r=a(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=i.call(t)),e[t]=n},o(s));e.exports=r},653:function(e,t,n){var o=n(654);e.exports=function createInverter(e,t){return function(n,a){return o(n,e,t(a),{})}}},654:function(e,t,n){var o=n(234);e.exports=function baseInverter(e,t,n,a){return o(e,function(e,o,s){t(a,n(e),o,s)}),a}},655:function(e,t,n){var o=n(656),a=n(661),s=o(function(e,t,n){return e+(n?" ":"")+a(t)});e.exports=s},656:function(e,t,n){var o=n(522),a=n(523),s=n(657),i=RegExp("['\u2019]","g");e.exports=function createCompounder(e){return function(t){return o(s(a(t).replace(i,"")),e,"")}}},657:function(e,t,n){var o=n(658),a=n(659),s=n(154),i=n(660);e.exports=function words(e,t,n){return e=s(e),void 0===(t=n?void 0:t)?a(e)?i(e):o(e):e.match(t)||[]}},658:function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function asciiWords(e){return e.match(n)||[]}},659:function(e,t){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function hasUnicodeWord(e){return n.test(e)}},660:function(e,t){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+n+"]",a="\\d+",s="[\\u2700-\\u27bf]",i="[a-z\\xdf-\\xf6\\xf8-\\xff]",r="[^\\ud800-\\udfff"+n+a+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",p="(?:"+i+"|"+r+")",d="(?:"+u+"|"+r+")",h="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",f="[\\ufe0e\\ufe0f]?"+h+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")[\\ufe0e\\ufe0f]?"+h+")*"),v="(?:"+[s,l,c].join("|")+")"+f,m=RegExp([u+"?"+i+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[o,u,"$"].join("|")+")",d+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[o,u+p,"$"].join("|")+")",u+"?"+p+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",u+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,v].join("|"),"g");e.exports=function unicodeWords(e){return e.match(m)||[]}},661:function(e,t,n){var o=n(662)("toUpperCase");e.exports=o},662:function(e,t,n){var o=n(663),a=n(480),s=n(664),i=n(154);e.exports=function createCaseFirst(e){return function(t){t=i(t);var n=a(t)?s(t):void 0,r=n?n[0]:t.charAt(0),l=n?o(n,1).join(""):t.slice(1);return r[e]()+l}}},663:function(e,t,n){var o=n(509);e.exports=function castSlice(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:o(e,t,n)}},664:function(e,t,n){var o=n(665),a=n(480),s=n(666);e.exports=function stringToArray(e){return a(e)?s(e):o(e)}},665:function(e,t){e.exports=function asciiToArray(e){return e.split("")}},666:function(e,t){var n="[\\ud800-\\udfff]",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",s="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",r="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+o+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[s,i,r].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[s+o+"?",o,i,r,n].join("|")+")",p=RegExp(a+"(?="+a+")|"+u+c,"g");e.exports=function unicodeToArray(e){return e.match(p)||[]}},668:function(e,t,n){e.exports=function(e,t){"use strict";function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function makeEmptyFunction(e){return function(){return e}}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n=function emptyFunction(){};n.thatReturns=makeEmptyFunction,n.thatReturnsFalse=makeEmptyFunction(!1),n.thatReturnsTrue=makeEmptyFunction(!0),n.thatReturnsNull=makeEmptyFunction(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e};var o=n,a=function validateFormat(e){};a=function validateFormat(e){if(void 0===e)throw new Error("invariant requires an error message argument")};var s=function invariant(e,t,n,o,s,i,r,l){if(a(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,s,i,r,l],p=0;(c=new Error(t.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},i=function warning(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];(function printWarning(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=0,s="Warning: "+e.replace(/%s/g,function(){return n[a++]});"undefined"!==typeof console&&console.error(s);try{throw new Error(s)}catch(i){}}).apply(void 0,[t].concat(o))}},r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==o.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(s){return!1}}()?Object.assign:function(e,t){for(var n,o,a=function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var i in n=Object(arguments[s]))l.call(n,i)&&(a[i]=n[i]);if(r){o=r(n);for(var u=0;u<o.length;u++)c.call(n,o[u])&&(a[o[u]]=n[o[u]])}}return a},p="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",d=s,h=i,f=p,v={},m=function checkPropTypes(e,t,n,o,a){for(var s in e)if(e.hasOwnProperty(s)){var i;try{d("function"===typeof e[s],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",o||"React class",n,s,typeof e[s]),i=e[s](t,s,o,n,null,f)}catch(l){i=l}if(h(!i||i instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",o||"React class",n,s,typeof i),i instanceof Error&&!(i.message in v)){v[i.message]=!0;var r=a?a():"";h(!1,"Failed %s type: %s%s",n,i.message,null!=r?r:"")}}},g=function factoryWithTypeCheckers(e,t){var n="function"===typeof Symbol&&Symbol.iterator,a="@@iterator",r="<<anonymous>>",l={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:function createAnyTypeChecker(){return createChainableTypeChecker(o.thatReturnsNull)}(),arrayOf:function createArrayOfTypeChecker(e){return createChainableTypeChecker(function validate(t,n,o,a,s){if("function"!==typeof e)return new PropTypeError("Property `"+s+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var i=t[n];if(!Array.isArray(i)){var r=getPropType(i);return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+r+"` supplied to `"+o+"`, expected an array.")}for(var l=0;l<i.length;l++){var c=e(i,l,o,a,s+"["+l+"]",p);if(c instanceof Error)return c}return null})},element:function createElementTypeChecker(){return createChainableTypeChecker(function validate(t,n,o,a,s){var i=t[n];if(!e(i)){var r=getPropType(i);return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+r+"` supplied to `"+o+"`, expected a single ReactElement.")}return null})}(),instanceOf:function createInstanceTypeChecker(e){return createChainableTypeChecker(function validate(t,n,o,a,s){if(!(t[n]instanceof e)){var i=e.name||r,l=function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:r}(t[n]);return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+l+"` supplied to `"+o+"`, expected instance of `"+i+"`.")}return null})},node:function createNodeChecker(){return createChainableTypeChecker(function validate(e,t,n,o,a){return isNode(e[t])?null:new PropTypeError("Invalid "+o+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")})}(),objectOf:function createObjectOfTypeChecker(e){return createChainableTypeChecker(function validate(t,n,o,a,s){if("function"!==typeof e)return new PropTypeError("Property `"+s+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var i=t[n],r=getPropType(i);if("object"!==r)return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+r+"` supplied to `"+o+"`, expected an object.");for(var l in i)if(i.hasOwnProperty(l)){var c=e(i,l,o,a,s+"."+l,p);if(c instanceof Error)return c}return null})},oneOf:function createEnumTypeChecker(e){return Array.isArray(e)?createChainableTypeChecker(function validate(t,n,o,a,s){for(var i=t[n],r=0;r<e.length;r++)if(l=i,c=e[r],l===c?0!==l||1/l===1/c:l!==l&&c!==c)return null;var l,c,u=JSON.stringify(e);return new PropTypeError("Invalid "+a+" `"+s+"` of value `"+i+"` supplied to `"+o+"`, expected one of "+u+".")}):(i(!1,"Invalid argument supplied to oneOf, expected an instance of array."),o.thatReturnsNull)},oneOfType:function createUnionTypeChecker(e){if(!Array.isArray(e))return i(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),o.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!==typeof n)return i(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",getPostfixForTypeWarning(n),t),o.thatReturnsNull}return createChainableTypeChecker(function validate(t,n,o,a,s){for(var i=0;i<e.length;i++){var r=e[i];if(null==r(t,n,o,a,s,p))return null}return new PropTypeError("Invalid "+a+" `"+s+"` supplied to `"+o+"`.")})},shape:function createShapeTypeChecker(e){return createChainableTypeChecker(function validate(t,n,o,a,s){var i=t[n],r=getPropType(i);if("object"!==r)return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+r+"` supplied to `"+o+"`, expected `object`.");for(var l in e){var c=e[l];if(c){var u=c(i,l,o,a,s+"."+l,p);if(u)return u}}return null})},exact:function createStrictShapeTypeChecker(e){return createChainableTypeChecker(function validate(t,n,o,a,s){var i=t[n],r=getPropType(i);if("object"!==r)return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+r+"` supplied to `"+o+"`, expected `object`.");var l=u({},t[n],e);for(var c in l){var d=e[c];if(!d)return new PropTypeError("Invalid "+a+" `"+s+"` key `"+c+"` supplied to `"+o+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=d(i,c,o,a,s+"."+c,p);if(h)return h}return null})}};function PropTypeError(e){this.message=e,this.stack=""}function createChainableTypeChecker(e){var n={},o=0;function checkType(a,l,c,u,d,h,f){if(u=u||r,h=h||c,f!==p)if(t)s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("undefined"!==typeof console){var v=u+":"+c;!n[v]&&o<3&&(i(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",h,u),n[v]=!0,o++)}return null==l[c]?a?null===l[c]?new PropTypeError("The "+d+" `"+h+"` is marked as required in `"+u+"`, but its value is `null`."):new PropTypeError("The "+d+" `"+h+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(l,c,u,d,h)}var a=checkType.bind(null,!1);return a.isRequired=checkType.bind(null,!0),a}function createPrimitiveTypeChecker(e){return createChainableTypeChecker(function validate(t,n,o,a,s,i){var r=t[n];if(getPropType(r)!==e){var l=getPreciseType(r);return new PropTypeError("Invalid "+a+" `"+s+"` of type `"+l+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function isNode(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(isNode);if(null===t||e(t))return!0;var o=function getIteratorFn(e){var t=e&&(n&&e[n]||e[a]);if("function"===typeof t)return t}(t);if(!o)return!1;var s,i=o.call(t);if(o!==t.entries){for(;!(s=i.next()).done;)if(!isNode(s.value))return!1}else for(;!(s=i.next()).done;){var r=s.value;if(r&&!isNode(r[1]))return!1}return!0;default:return!1}}function getPropType(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function isSymbol(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function getPreciseType(e){if("undefined"===typeof e||null===e)return""+e;var t=getPropType(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function getPostfixForTypeWarning(e){var t=getPreciseType(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return PropTypeError.prototype=Error.prototype,l.checkPropTypes=m,l.PropTypes=l,l},b=createCommonjsModule(function(e){var t="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=g(function isValidElement(e){return"object"===typeof e&&null!==e&&e.$$typeof===t},!0)}),y=createCommonjsModule(function(e){!function(){var t={}.hasOwnProperty;function classNames(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o))e.push(classNames.apply(null,o));else if("object"===a)for(var s in o)t.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}e.exports?e.exports=classNames:window.classNames=classNames}()});function findInArray(e,t){for(var n=0,o=e.length;n<o;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function isFunction(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)}function isNum(e){return"number"===typeof e&&!isNaN(e)}function int(e){return parseInt(e,10)}function dontSetMe(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}var k=["Moz","Webkit","O","ms"];function browserPrefixToKey(e,t){return t?""+t+function kebabToTitleCase(e){for(var t="",n=!0,o=0;o<e.length;o++)n?(t+=e[o].toUpperCase(),n=!1):"-"===e[o]?n=!0:t+=e[o];return t}(e):e}var C=function getPrefix(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window||"undefined"===typeof window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<k.length;n++)if(browserPrefixToKey(e,k[n])in t)return k[n];return""}(),M=function classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),S=function defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O=function inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},I=function possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},x=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,a=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(o=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(l){a=!0,s=l}finally{try{!o&&r.return&&r.return()}finally{if(a)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},E="";function matchesSelector(e,t){return E||(E=findInArray(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return isFunction(e[t])})),!!isFunction(e[E])&&e[E](t)}function matchesSelectorAndParentsTo(e,t,n){var o=e;do{if(matchesSelector(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1}function addEvent(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function removeEvent(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function getTranslation(e,t,n){var o=e.x,a=e.y,s="translate("+o+n+","+a+n+")";if(t){var i=""+("string"===typeof t.x?t.x:t.x+n),r=""+("string"===typeof t.y?t.y:t.y+n);s="translate("+i+", "+r+")"+s}return s}function addUserSelectStyles(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {background: transparent;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&function addClassName(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)"+t+"(?!\\S)"))||(e.className+=" "+t)}(e.body,"react-draggable-transparent-selection")}}function removeUserSelectStyles(e){try{e&&e.body&&function removeClassName(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","g"),"")}(e.body,"react-draggable-transparent-selection"),e.selection?e.selection.empty():window.getSelection().removeAllRanges()}catch(t){}}function getBoundPosition(e,t,n){if(!e.props.bounds)return[t,n];var o=e.props.bounds;o="string"===typeof o?o:function cloneBounds(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);var a=findDOMNode(e);if("string"===typeof o){var s=a.ownerDocument,i=s.defaultView,r=void 0;if(!((r="parent"===o?a.parentNode:s.querySelector(o))instanceof i.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');var l=i.getComputedStyle(a),c=i.getComputedStyle(r);o={left:-a.offsetLeft+int(c.paddingLeft)+int(l.marginLeft),top:-a.offsetTop+int(c.paddingTop)+int(l.marginTop),right:function innerWidth(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=int(n.paddingLeft),t-=int(n.paddingRight)}(r)-function outerWidth(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=int(n.borderLeftWidth),t+=int(n.borderRightWidth)}(a)-a.offsetLeft+int(c.paddingRight)-int(l.marginRight),bottom:function innerHeight(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=int(n.paddingTop),t-=int(n.paddingBottom)}(r)-function outerHeight(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=int(n.borderTopWidth),t+=int(n.borderBottomWidth)}(a)-a.offsetTop+int(c.paddingBottom)-int(l.marginBottom)}}return isNum(o.right)&&(t=Math.min(t,o.right)),isNum(o.bottom)&&(n=Math.min(n,o.bottom)),isNum(o.left)&&(t=Math.max(t,o.left)),isNum(o.top)&&(n=Math.max(n,o.top)),[t,n]}function getControlPosition(e,t,n){var o="number"===typeof t?function getTouch(e,t){return e.targetTouches&&findInArray(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&findInArray(e.changedTouches,function(e){return t===e.identifier})}(e,t):null;if("number"===typeof t&&!o)return null;var a=findDOMNode(n),s=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return function offsetXYFromParent(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=e.clientX+t.scrollLeft-n.left,a=e.clientY+t.scrollTop-n.top;return{x:o,y:a}}(o||e,s)}function createCoreData(e,t,n){var o=e.state,a=!isNum(o.lastX),s=findDOMNode(e);return a?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-o.lastX,deltaY:n-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:n}}function createDraggableData(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function findDOMNode(t){var n=e.findDOMNode(t);if(!n)throw new Error("<DraggableCore>: Unmounted during event!");return n}var D={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},j=D.mouse,N=function(n){function DraggableCore(){var t,n,o;M(this,DraggableCore);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return o=I(this,(t=DraggableCore.__proto__||Object.getPrototypeOf(DraggableCore)).call.apply(t,[this].concat(s))),n=o,o.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},o.handleDragStart=function(t){if(o.props.onMouseDown(t),!o.props.allowAnyClick&&"number"===typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode(o);if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var a=n.ownerDocument;if(!(o.props.disabled||!(t.target instanceof a.defaultView.Node)||o.props.handle&&!matchesSelectorAndParentsTo(t.target,o.props.handle,n)||o.props.cancel&&matchesSelectorAndParentsTo(t.target,o.props.cancel,n))){var s=function getTouchIdentifier(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}(t);o.setState({touchIdentifier:s});var i=getControlPosition(t,s,o);if(null!=i){var r=i.x,l=i.y,c=createCoreData(o,r,l);o.props.onStart;var u=o.props.onStart(t,c);!1!==u&&(o.props.enableUserSelectHack&&addUserSelectStyles(a),o.setState({dragging:!0,lastX:r,lastY:l}),addEvent(a,j.move,o.handleDrag),addEvent(a,j.stop,o.handleDragStop))}}},o.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=getControlPosition(e,o.state.touchIdentifier,o);if(null!=t){var n=t.x,a=t.y;if(Array.isArray(o.props.grid)){var s=n-o.state.lastX,i=a-o.state.lastY,r=function snapToGrid(e,t,n){var o=Math.round(t/e[0])*e[0],a=Math.round(n/e[1])*e[1];return[o,a]}(o.props.grid,s,i),l=x(r,2);if(s=l[0],i=l[1],!s&&!i)return;n=o.state.lastX+s,a=o.state.lastY+i}var c=createCoreData(o,n,a),u=o.props.onDrag(e,c);if(!1!==u)o.setState({lastX:n,lastY:a});else try{o.handleDragStop(new MouseEvent("mouseup"))}catch(d){var p=document.createEvent("MouseEvents");p.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.handleDragStop(p)}}},o.handleDragStop=function(t){if(o.state.dragging){var n=getControlPosition(t,o.state.touchIdentifier,o);if(null!=n){var a=n.x,s=n.y,i=createCoreData(o,a,s),r=e.findDOMNode(o);r&&o.props.enableUserSelectHack&&removeUserSelectStyles(r.ownerDocument),o.setState({dragging:!1,lastX:NaN,lastY:NaN}),o.props.onStop(t,i),r&&(removeEvent(r.ownerDocument,j.move,o.handleDrag),removeEvent(r.ownerDocument,j.stop,o.handleDragStop))}}},o.onMouseDown=function(e){return j=D.mouse,o.handleDragStart(e)},o.onMouseUp=function(e){return j=D.mouse,o.handleDragStop(e)},o.onTouchStart=function(e){return j=D.touch,o.handleDragStart(e)},o.onTouchEnd=function(e){return j=D.touch,o.handleDragStop(e)},I(o,n)}return O(DraggableCore,n),w(DraggableCore,[{key:"componentWillUnmount",value:function componentWillUnmount(){var t=e.findDOMNode(this);if(t){var n=t.ownerDocument;removeEvent(n,D.mouse.move,this.handleDrag),removeEvent(n,D.touch.move,this.handleDrag),removeEvent(n,D.mouse.stop,this.handleDragStop),removeEvent(n,D.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&removeUserSelectStyles(n)}}},{key:"render",value:function render(){return t.cloneElement(t.Children.only(this.props.children),{style:function styleHacks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A({touchAction:"none"},e)}(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),DraggableCore}(t.Component);N.displayName="DraggableCore",N.propTypes={allowAnyClick:b.bool,disabled:b.bool,enableUserSelectHack:b.bool,offsetParent:function offsetParent(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:b.arrayOf(b.number),scale:b.number,handle:b.string,cancel:b.string,onStart:b.func,onDrag:b.func,onStop:b.func,onMouseDown:b.func,className:dontSetMe,style:dontSetMe,transform:dontSetMe},N.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function onStart(){},onDrag:function onDrag(){},onStop:function onStop(){},onMouseDown:function onMouseDown(){}};var L=function(n){function Draggable(e){M(this,Draggable);var t=I(this,(Draggable.__proto__||Object.getPrototypeOf(Draggable)).call(this,e));return t.onDragStart=function(e,n){var o=t.props.onStart(e,createDraggableData(t,n));if(!1===o)return!1;t.setState({dragging:!0,dragged:!0})},t.onDrag=function(e,n){if(!t.state.dragging)return!1;var o=createDraggableData(t,n),a={x:o.x,y:o.y};if(t.props.bounds){var s=a.x,i=a.y;a.x+=t.state.slackX,a.y+=t.state.slackY;var r=getBoundPosition(t,a.x,a.y),l=x(r,2),c=l[0],u=l[1];a.x=c,a.y=u,a.slackX=t.state.slackX+(s-a.x),a.slackY=t.state.slackY+(i-a.y),o.x=a.x,o.y=a.y,o.deltaX=a.x-t.state.x,o.deltaY=a.y-t.state.y}var p=t.props.onDrag(e,o);if(!1===p)return!1;t.setState(a)},t.onDragStop=function(e,n){if(!t.state.dragging)return!1;var o=t.props.onStop(e,createDraggableData(t,n));if(!1===o)return!1;var a={dragging:!1,slackX:0,slackY:0},s=Boolean(t.props.position);if(s){var i=t.props.position,r=i.x,l=i.y;a.x=r,a.y=l}t.setState(a)},t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},t}return O(Draggable,n),w(Draggable,[{key:"componentWillMount",value:function componentWillMount(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function componentDidMount(){"undefined"!==typeof window.SVGElement&&e.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.setState({dragging:!1})}},{key:"render",value:function render(){var e,n={},o=null,a=Boolean(this.props.position),s=!a||this.state.dragging,i=this.props.position||this.props.defaultPosition,r={x:function canDragX(e){return"both"===e.props.axis||"x"===e.props.axis}(this)&&s?this.state.x:i.x,y:function canDragY(e){return"both"===e.props.axis||"y"===e.props.axis}(this)&&s?this.state.y:i.y};this.state.isElementSVG?o=function createSVGTransform(e,t){return getTranslation(e,t,"")}(r,this.props.positionOffset):n=function createCSSTransform(e,t){var n=getTranslation(e,t,"px");return S({},browserPrefixToKey("transform",C),n)}(r,this.props.positionOffset);var l=this.props,c=l.defaultClassName,u=l.defaultClassNameDragging,p=l.defaultClassNameDragged,d=t.Children.only(this.props.children),h=y(d.props.className||"",c,(S(e={},u,this.state.dragging),S(e,p,this.state.dragged),e));return t.createElement(N,A({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(d,{className:h,style:A({},d.props.style,n),transform:o}))}}]),Draggable}(t.Component);return L.displayName="Draggable",L.propTypes=A({},N.propTypes,{axis:b.oneOf(["both","x","y","none"]),bounds:b.oneOfType([b.shape({left:b.number,right:b.number,top:b.number,bottom:b.number}),b.string,b.oneOf([!1])]),defaultClassName:b.string,defaultClassNameDragging:b.string,defaultClassNameDragged:b.string,defaultPosition:b.shape({x:b.number,y:b.number}),positionOffset:b.shape({x:b.oneOfType([b.number,b.string]),y:b.oneOfType([b.number,b.string])}),position:b.shape({x:b.number,y:b.number}),className:dontSetMe,style:dontSetMe,transform:dontSetMe}),L.defaultProps=A({},N.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}),L.default=L,L.DraggableCore=N,L}(n(38),n(1))},669:function(e,t,n){"use strict";var o=n(2),a=n(11),s=n(14),i=n(20),r=n(19),l=n(21),c=n(1),u=n.n(c),p=n(23),d=n(914),h=n(832),f=n(972),v=n(976),m=n(68),g=n(26).a.siaSetUIConfig,b=function(e){function SIASettingButton(e){var t;return Object(a.a)(this,SIASettingButton),(t=Object(i.a)(this,Object(r.a)(SIASettingButton).call(this,e))).state={},t}return Object(l.a)(SIASettingButton,e),Object(s.a)(SIASettingButton,[{key:"toggleAnnoDetails",value:function toggleAnnoDetails(){this.props.siaSetUIConfig(Object(o.a)({},this.props.uiConfig,{annoDetails:Object(o.a)({},this.props.uiConfig.annoDetails,{visible:!this.props.uiConfig.annoDetails.visible})}))}},{key:"toggleLabelInfo",value:function toggleLabelInfo(){this.props.siaSetUIConfig(Object(o.a)({},this.props.uiConfig,{labelInfo:Object(o.a)({},this.props.uiConfig.labelInfo,{visible:!this.props.uiConfig.labelInfo.visible})}))}},{key:"handleStrokeWidthChange",value:function handleStrokeWidthChange(e){this.props.siaSetUIConfig(Object(o.a)({},this.props.uiConfig,{strokeWidth:parseInt(e.target.value)}))}},{key:"handleNodeRadiusChange",value:function handleNodeRadiusChange(e){this.props.siaSetUIConfig(Object(o.a)({},this.props.uiConfig,{nodeRadius:parseInt(e.target.value)}))}},{key:"render",value:function render(){var e=this;if(!this.props.annos.image)return null;var t=u.a.createElement("div",null,u.a.createElement(d.a,{horizontal:!0},"Info Boxes"),u.a.createElement(h.a,{checked:this.props.uiConfig.annoDetails.visible,label:"Annotation Details",toggle:!0,onClick:function onClick(){return e.toggleAnnoDetails()}}),u.a.createElement(h.a,{checked:this.props.uiConfig.labelInfo.visible,label:"Label Info",toggle:!0,onClick:function onClick(){return e.toggleLabelInfo()}}),u.a.createElement(d.a,{horizontal:!0},"Anno Appearance"),u.a.createElement("div",null,"Stroke width: ",this.props.uiConfig.strokeWidth),u.a.createElement("input",{type:"range",min:1,max:10,value:this.props.uiConfig.strokeWidth,onChange:function onChange(t){return e.handleStrokeWidthChange(t)}}),u.a.createElement("div",null,"Node radius: ",this.props.uiConfig.nodeRadius),u.a.createElement("input",{type:"range",min:1,max:10,value:this.props.uiConfig.nodeRadius,onChange:function onChange(t){return e.handleNodeRadiusChange(t)}}));return u.a.createElement(f.a,{trigger:u.a.createElement(v.a.Item,{name:"setting"},u.a.createElement(m.a,{name:"setting"})),content:t,position:"right center",pinned:!0,on:"click"})}}]),SIASettingButton}(c.Component);t.a=Object(p.b)(function mapStateToProps(e){return{uiConfig:e.sia.uiConfig,annos:e.sia.annos}},{siaSetUIConfig:g})(b)},670:function(e,t,n){"use strict";n.d(t,"e",function(){return textIcon}),n.d(t,"b",function(){return lineIcon}),n.d(t,"a",function(){return bBoxIcon}),n.d(t,"d",function(){return polygonIcon}),n.d(t,"c",function(){return pointIcon});var o=n(1),a=n.n(o);function textIcon(){return a.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1190.549 841.891",width:"17px"},a.a.createElement("path",{id:"T",fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M925.876,172.939c-0.172-13.004,0.161-26.013,0.116-39.019 c-0.021-4.017-5.046-9.053-9.037-9.087c-7.948-0.068-15.897-0.051-23.848-0.051c-73.526,0.006-147.051,0.02-220.578,0.032 c-8.095,0.001-11.969,3.776-11.969,11.742c-0.009,154.998-0.009,309.997-0.009,464.998c0,44.257-0.002,88.519,0.009,132.778 c0,7.553,4.173,11.736,11.651,11.747c21.677,0.018,30.288-0.227,65.032,0.018c34.743,0.239,46.295,27.955,46.295,46.43 c-0.005,18.477-13.856,42.722-46.792,43.747c-42.993,0.197-85.989-0.057-128.979-0.05c-47.697,0.014-95.387,0.009-143.078,0.074 c-13.712-0.278-44.888-9.133-44.888-44.159c0-35.025,20.399-44.646,42.975-46.192c16.293,0.115,45.164,0.179,67.743,0.16 c5.553-0.006,10.175-5.03,10.178-11.005c0.008-45.524-0.016-91.049-0.018-136.569c0-99.001,0-197.997,0.008-296.994 c0.001-55.278,0.018-110.559,0.007-165.837c0-6.513-4.521-10.917-11.118-10.917c-81.116-0.005-162.229-0.005-243.34-0.001 c-6.977,0-11.061,3.995-11.069,10.825c-0.016,12.286-0.033,24.569,0.019,36.855c-0.076,20.742-10.042,43.007-40.763,43.007 c-30.724,0-46.917-15.208-48.805-43.296c-0.419-14.084,0.01-28.181,0.01-42.272c0-27.46,0-54.917,0-82.379 c0-1.048,0.747-16.871,13.391-30.357c12.642-13.485,26.225-12.505,27.633-12.505c84.544,0.015,169.091,0.009,253.635,0.009 c153.191,0.001,459.578,0.004,459.578,0.004s20.149-0.287,35.766-0.17c0.983-0.023,18.696,1.188,30.027,13.07 c11.333,11.885,9.972,27.513,9.972,28.256c-0.024,42.091,0.255,84.183-0.007,126.274c-0.247,26.341-22.705,41.944-44.85,42.037 C948.049,214.236,926.687,199.643,925.876,172.939z"}))}function lineIcon(){return a.a.createElement("svg",{version:"1.1",id:"Linie",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1190.549 841.891",width:"17px"},a.a.createElement("path",{fill:"currentColor",d:"M986.331,109.582c7.141-10.669,28.926-51.179-2.968-85.299S891.011,8.972,891.011,8.972L539.125,133.474 L63.239,302.022c-21.503,7.998-53.586,30.072-60.956,61.716s-2.116,58.538,22.414,96.79S211.33,752.213,228.564,777.28 c26.453,36.868,62.16,58.042,105.507,57.154s365.665-7.485,365.665-7.485l331.7-8.325l89.453-2.293c0,0,70.998-7.179,69.861-60.287 c-1.135-53.108-74.618-62.721-74.618-62.721s-733.215,15.553-749.148,15.576c-22.688,0.201-45.355-15.278-54.146-28.928 s-175.79-272.956-175.79-272.956l600.587-212.338c0,0-73.179,67.087-99.315,100.041s-30.56,74.565-5.053,95.237 c31.188,24.081,91.974-3.708,123.127-39.312C782.35,323.912,979.191,120.251,986.331,109.582z"}))}function bBoxIcon(){return a.a.createElement("svg",{version:"1.1",id:"Linie",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1190.549 841.891",width:"17px"},a.a.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:"120",strokeMiterlimit:"10",d:"M929.775,710.655 c0,23.386-19.134,42.52-42.52,42.52H278.991c-23.386,0-42.52-19.134-42.52-42.52V102.392c0-23.386,19.134-42.52,42.52-42.52 h608.264c23.386,0,42.52,19.134,42.52,42.52V710.655z"}))}function polygonIcon(){return a.a.createElement("svg",{version:"1.1",id:"Linie",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1190.549 841.891",width:"17px"},a.a.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:"120",strokeMiterlimit:"10",d:"M342.327,769.938 c-23.379,0.548-52.922-15.056-65.65-34.674L65.479,409.738c-12.729-19.619-5.085-41.998,16.984-49.732L917.331,67.421 c22.07-7.734,26.86-0.275,10.645,16.576L691.761,329.475c-16.216,16.852-14.503,42.542,3.807,57.092l425.212,337.901 c18.31,14.549,14.16,26.901-9.219,27.449L342.327,769.938z"}))}function pointIcon(){return a.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1190.549 841.891",width:"17px"},a.a.createElement("path",{fill:"currentColor",d:"M748.197,408.286c0,151.355-122.699,274.058-274.059,274.058c-151.357,0-274.057-122.703-274.057-274.058 c0-151.356,122.7-274.057,274.057-274.057C625.497,134.229,748.197,256.929,748.197,408.286z"}))}},671:function(e,t,n){"use strict";var o=n(155),a=n(2),s=n(11),i=n(14),r=n(20),l=n(19),c=n(21),u=n(1),p=n.n(u),d=n(508),h=n.n(d),f=n(438),v="view",m="edit",g="create",b="move",y=10,k=15,C=function(e){function AnnoBar(e){var t;return Object(s.a)(this,AnnoBar),(t=Object(r.a)(this,Object(l.a)(AnnoBar).call(this,e))).state={top:0,left:0,width:50,height:k,fontSize:y},t.textRef=p.a.createRef(),t}return Object(c.a)(AnnoBar,e),Object(i.a)(AnnoBar,[{key:"componentWillMount",value:function componentWillMount(){this.props.mode!==g&&this.setPosition()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.mode!==g&&this.setPosition()}},{key:"handleClick",value:function handleClick(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)}},{key:"setPosition",value:function setPosition(){var e=f.e(this.props.anno.data);if(e=f.d(e)[0],this.textRef.current){var t=(this.textRef.current.getBoundingClientRect().width+2)/this.props.svg.scale;t!==this.state.width&&this.setState({width:t,fontSize:Math.ceil(y/this.props.svg.scale)})}var n=e.y-10,o=e.x+7;n<0&&(n=e.y+10),this.state.top===n&&this.state.left===o||this.setState({top:n,left:o})}},{key:"render",value:function render(){var e,t=this,n="";if(!this.props.possibleLabels)return null;this.props.anno.labelIds&&this.props.anno.labelIds.length>0?this.props.anno.labelIds.forEach(function(o,a){e=t.props.possibleLabels.find(function(e){return e.id===o}),a>0&&(n+=", "),n+=e.label}):n=this.props.defaultLabel?this.props.defaultLabel:"no label";switch(this.props.mode){case v:return p.a.createElement("g",null,p.a.createElement("rect",{x:this.state.left,y:this.state.top-6,width:this.state.width,height:this.state.height,rx:"5",opacity:"0.5",style:this.props.style}),p.a.createElement("text",{x:this.state.left,y:this.state.top,fill:"white",onClick:function onClick(e){return t.handleClick(e)},textAnchor:"start",alignmentBaseline:"central",ref:this.textRef,fontSize:this.state.fontSize+"pt"},n),p.a.createElement("rect",{x:this.state.left,y:this.state.top-6,width:this.state.width,height:this.state.height,rx:"5",opacity:"0.01",style:this.props.style}));default:return null}}}]),AnnoBar}(u.Component),M=function(e){function InfSelectionArea(e){var t;return Object(s.a)(this,InfSelectionArea),(t=Object(r.a)(this,Object(l.a)(InfSelectionArea).call(this,e))).state={selAreaCss:"sel-area-off"},t}return Object(c.a)(InfSelectionArea,e),Object(i.a)(InfSelectionArea,[{key:"componentDidMount",value:function componentDidMount(){this.props.enable?this.enableSelArea():this.disableSelArea()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.enable?this.enableSelArea():this.disableSelArea()}},{key:"onMouseMove",value:function onMouseMove(e){this.props.onMouseMove&&this.props.onMouseMove(e)}},{key:"onMouseUp",value:function onMouseUp(e){this.props.onMouseUp&&this.props.onMouseUp(e)}},{key:"enableSelArea",value:function enableSelArea(){"sel-area-on"!==this.state.selAreaCss&&this.setState({selAreaCss:"sel-area-on"})}},{key:"disableSelArea",value:function disableSelArea(){"sel-area-off"!==this.state.selAreaCss&&this.setState({selAreaCss:"sel-area-off"})}},{key:"render",value:function render(){var e=this;return p.a.createElement("circle",{cx:this.props.svg.width/2,cy:this.props.svg.height/2,r:"100%",className:this.state.selAreaCss,onMouseMove:function onMouseMove(t){e.onMouseMove(t)},onMouseUp:function onMouseUp(t){e.onMouseUp(t)}})}}]),InfSelectionArea}(u.Component),w=(n(460),function(e){function Node(e){var t;return Object(s.a)(this,Node),(t=Object(r.a)(this,Object(l.a)(Node).call(this,e))).state={haloCss:"node-halo-off",selAreaCss:"sel-area-off",nodeSelected:!1,style:{}},t}return Object(c.a)(Node,e),Object(i.a)(Node,[{key:"componentDidMount",value:function componentDidMount(){this.setState({style:Object(a.a)({},this.props.style,{cursor:this.getCursorStyle(this.props.mode)})})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){switch(this.props.mode){case g:(0!==this.props.idx||this.props.isPoint)&&this.turnSelAreaOn();break;case m:this.turnSelAreaOn()}e.mode!==this.props.mode&&this.setState({style:Object(a.a)({},this.state.style,{cursor:this.getCursorStyle(this.props.mode)})}),e.style!==this.props.style&&this.setState({style:Object(a.a)({},this.state.style,this.props.style,{cursor:this.getCursorStyle(this.props.mode)})})}},{key:"onClick",value:function onClick(e){this.turnHaloOn(),this.props.onClick&&this.props.onClick(e,this.props.idx)}},{key:"onMouseMove",value:function onMouseMove(e){this.props.onMouseMove&&this.props.onMouseMove(e,this.props.idx)}},{key:"onContextMenu",value:function onContextMenu(e){e.preventDefault()}},{key:"onMouseUp",value:function onMouseUp(e){switch(this.props.mode){case m:switch(e.button){case 0:this.turnSelAreaOff()}}this.props.onMouseUp&&this.props.onMouseUp(e,this.props.idx)}},{key:"onMouseDown",value:function onMouseDown(e){switch(e.stopPropagation(),this.props.onMouseDown&&this.props.onMouseDown(e,this.props.idx),this.props.mode){case g:switch(e.button){case 0:case 2:this.turnSelAreaOff()}}}},{key:"onMouseOver",value:function onMouseOver(e){this.props.isSelected&&this.turnHaloOn()}},{key:"onMouseLeave",value:function onMouseLeave(e){this.props.isSelected&&this.turnHaloOff()}},{key:"onDoubleClick",value:function onDoubleClick(e){this.props.onDoubleClick&&this.props.onDoubleClick(e,this.props.idx)}},{key:"handleMouseLeave",value:function handleMouseLeave(e){this.props.onMouseLeave&&this.props.onMouseLeave(e,this.props.idx)}},{key:"getCursorStyle",value:function getCursorStyle(e){switch(e){case g:case m:return"crosshair";case v:return"default"}}},{key:"turnSelAreaOn",value:function turnSelAreaOn(){"sel-area-on"!==this.state.selAreaCss&&this.setState({selAreaCss:"sel-area-on"})}},{key:"turnSelAreaOff",value:function turnSelAreaOff(){"sel-area-off"!==this.state.selAreaCss&&this.setState({selAreaCss:"sel-area-off"})}},{key:"turnHaloOn",value:function turnHaloOn(){this.setState({haloCss:"node-halo-on"})}},{key:"turnHaloOff",value:function turnHaloOff(){this.setState({haloCss:"node-halo-off"})}},{key:"renderHalo",value:function renderHalo(){var e=this;if("node-halo-off"===this.state.haloCss)return null;var t=this.props.anno[this.props.idx];return p.a.createElement("circle",{cx:t.x,cy:t.y,r:3*this.props.style.r,className:this.state.haloCss,onMouseLeave:function onMouseLeave(t){return e.onMouseLeave(t)}})}},{key:"renderNodes",value:function renderNodes(){var e=this,t=this.props.anno[this.props.idx];return p.a.createElement("g",{onClick:function onClick(t){return e.onClick(t)},onMouseMove:function onMouseMove(t){return e.onMouseMove(t)},onContextMenu:function onContextMenu(t){return e.onContextMenu(t)},onMouseUp:function onMouseUp(t){return e.onMouseUp(t)},onMouseDown:function onMouseDown(t){return e.onMouseDown(t)},onDoubleClick:function onDoubleClick(t){return e.onDoubleClick(t)},onMouseLeave:function onMouseLeave(t){return e.handleMouseLeave(t)}},p.a.createElement("circle",{cx:t.x,cy:t.y,r:"100%",className:this.state.selAreaCss}),this.renderHalo(),p.a.createElement("circle",{cx:t.x,cy:t.y,r:3,fill:"red",style:this.state.style,className:this.props.className,onMouseOver:function onMouseOver(t){return e.onMouseOver(t)}}))}},{key:"render",value:function render(){return p.a.createElement("g",null,this.renderNodes())}}]),Node}(u.Component)),S=function(e){function Point(e){var t;return Object(s.a)(this,Point),(t=Object(r.a)(this,Object(l.a)(Point).call(this,e))).state={anno:void 0},t}return Object(c.a)(Point,e),Object(i.a)(Point,[{key:"componentDidMount",value:function componentDidMount(e){if(this.props.anno.mode===g){var t=this.props.anno.data[0],n=Object(a.a)({},this.props.anno,{data:[{x:t.x,y:t.y}],selectedNode:0});this.setState({anno:n})}else this.setState({anno:Object(a.a)({},this.props.anno)})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.anno!==this.props.anno&&this.setState({anno:Object(a.a)({},this.props.anno)})}},{key:"onMouseMove",value:function onMouseMove(e){switch(this.state.anno.mode){case b:this.move(e.movementX/this.props.svg.scale,e.movementY/this.props.svg.scale)}}},{key:"onMouseUp",value:function onMouseUp(e){switch(this.state.anno.mode){case b:0===e.button&&(this.requestModeChange(this.state.anno,v),this.performedAction(this.state.anno,"annoMoved"));break;case g:this.requestModeChange(this.state.anno,v),this.performedAction(this.state.anno,"annoCreated")}}},{key:"onNodeMouseDown",value:function onNodeMouseDown(e,t){switch(this.state.anno.mode){case v:0===e.button&&this.props.isSelected&&this.requestModeChange(this.state.anno,b)}}},{key:"performedAction",value:function performedAction(e,t){this.props.onAction&&this.props.onAction(e,t)}},{key:"requestModeChange",value:function requestModeChange(e,t){this.props.onModeChangeRequest(e,t)}},{key:"move",value:function move(e,t){this.setState({anno:Object(a.a)({},this.state.anno,{data:f.f(this.state.anno.data,e,t)})})}},{key:"renderInfSelectionArea",value:function renderInfSelectionArea(){switch(this.state.anno.mode){case b:return p.a.createElement(M,{enable:!0,svg:this.props.svg});default:return null}}},{key:"renderNode",value:function renderNode(){var e=this;if(!this.props.isSelected)return null;switch(this.state.anno.mode){case"editLabel":case b:return null;case m:case g:return p.a.createElement(w,{anno:this.state.anno.data,key:this.state.selectedNode,idx:this.state.anno.selectedNode,style:this.props.style,className:this.props.className,isSelected:this.props.isSelected,mode:this.state.anno.mode,svg:this.props.svg,onMouseDown:function onMouseDown(t,n){return e.onNodeMouseDown(t,n)},isPoint:!0});default:return this.state.anno.data.map(function(t,n){return p.a.createElement(w,{anno:e.state.anno.data,idx:n,key:n,style:e.props.style,className:e.props.className,isSelected:e.props.isSelected,mode:e.state.anno.mode,svg:e.props.svg,onMouseDown:function onMouseDown(t,n){return e.onNodeMouseDown(t,n)},isPoint:!0})})}}},{key:"renderPoint",value:function renderPoint(){var e=this;return this.state.anno.data.map(function(t,n){return p.a.createElement("circle",{key:n,cx:t.x,cy:t.y,r:10,fill:"red",style:e.props.style,className:e.props.className})})}},{key:"render",value:function render(){var e=this;return this.state.anno?p.a.createElement("g",{onMouseMove:function onMouseMove(t){return e.onMouseMove(t)},onMouseUp:function onMouseUp(t){return e.onMouseUp(t)}},this.renderPoint(),this.renderNode(),this.renderInfSelectionArea()):null}}]),Point}(u.Component);function getMousePosition(e,t){var n=getMousePositionAbs(e,t);return{x:n.x/t.scale-t.translateX,y:n.y/t.scale-t.translateY}}function getMousePositionAbs(e,t){return{x:e.pageX-t.left,y:e.pageY-t.top}}var A=function(e){function BBox(e){var t;return Object(s.a)(this,BBox),(t=Object(r.a)(this,Object(l.a)(BBox).call(this,e))).state={anno:void 0},t}return Object(c.a)(BBox,e),Object(i.a)(BBox,[{key:"componentDidMount",value:function componentDidMount(e){if(this.props.anno.mode===g){var t=this.props.anno.data[0],n=Object(a.a)({},this.props.anno,{data:[{x:t.x,y:t.y},{x:t.x+1,y:t.y},{x:t.x+1,y:t.y+1},{x:t.x,y:t.y+1}],selectedNode:2});this.setState({anno:n})}else this.setState({anno:Object(a.a)({},this.props.anno)})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.anno!==this.props.anno&&this.setState({anno:Object(a.a)({},this.props.anno)})}},{key:"onNodeMouseMove",value:function onNodeMouseMove(e,t){switch(this.state.anno.mode){case g:case m:var n=getMousePosition(e,this.props.svg),s=t-1<0?3:t-1,i=t+1>3?0:t+1,r=Object(o.a)(this.state.anno.data);t%2===0?(r[s].x=n.x,r[t].x=n.x,r[t].y=n.y,r[i].y=n.y):(r[s].y=n.y,r[t].x=n.x,r[t].y=n.y,r[i].x=n.x),this.setState({anno:Object(a.a)({},this.state.anno,{data:r})})}}},{key:"onNodeMouseDown",value:function onNodeMouseDown(e,t){switch(this.state.anno.mode){case v:0===e.button&&this.requestModeChange(Object(a.a)({},this.state.anno,{selectedNode:t}),m)}}},{key:"onNodeMouseUp",value:function onNodeMouseUp(e,t){switch(this.state.anno.mode){case m:0===e.button&&(this.requestModeChange(this.state.anno,v),this.performedAction(this.state.anno,"annoEdited"));break;case g:2===e.button&&(this.requestModeChange(this.state.anno,v),this.performedAction(this.state.anno,"annoCreated"))}}},{key:"handleNodeMouseLeave",value:function handleNodeMouseLeave(e,t){switch(this.state.anno.mode){case g:this.requestModeChange(this.state.anno,v),this.performedAction(this.state.anno,"annoCreated")}}},{key:"onMouseMove",value:function onMouseMove(e){switch(this.state.anno.mode){case b:this.move(e.movementX/this.props.svg.scale,e.movementY/this.props.svg.scale)}}},{key:"onMouseUp",value:function onMouseUp(e){switch(this.state.anno.mode){case b:0===e.button&&(this.requestModeChange(this.state.anno,v),this.performedAction(this.state.anno,"annoMoved"))}}},{key:"onMouseDown",value:function onMouseDown(e){switch(this.state.anno.mode){case v:0===e.button&&this.props.isSelected&&this.requestModeChange(this.state.anno,b)}}},{key:"requestModeChange",value:function requestModeChange(e,t){this.props.onModeChangeRequest(e,t)}},{key:"performedAction",value:function performedAction(e,t){this.props.onAction&&this.props.onAction(e,t)}},{key:"toPolygonStr",value:function toPolygonStr(e){return e.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" ")}},{key:"move",value:function move(e,t){this.setState({anno:Object(a.a)({},this.state.anno,{data:f.f(this.state.anno.data,e,t)})})}},{key:"renderPolygon",value:function renderPolygon(){var e=this;return this.state.anno.mode,p.a.createElement("polygon",{points:this.toPolygonStr(this.state.anno.data),fill:"none",stroke:"purple",style:this.props.style,className:this.props.className,onMouseDown:function onMouseDown(t){return e.onMouseDown(t)},onMouseUp:function onMouseUp(t){return e.onMouseUp(t)}})}},{key:"renderNodes",value:function renderNodes(){var e=this;if(!this.props.isSelected)return null;switch(this.state.anno.mode){case b:case"editLabel":return null;case m:case g:return p.a.createElement(w,{anno:this.state.anno.data,key:this.state.anno.selectedNode,idx:this.state.anno.selectedNode,style:this.props.style,className:this.props.className,isSelected:this.props.isSelected,mode:this.state.anno.mode,svg:this.props.svg,onMouseDown:function onMouseDown(t,n){return e.onNodeMouseDown(t,n)},onMouseUp:function onMouseUp(t,n){return e.onNodeMouseUp(t,n)},onMouseMove:function onMouseMove(t,n){return e.onNodeMouseMove(t,n)},onMouseLeave:function onMouseLeave(t,n){return e.handleNodeMouseLeave(t,n)}});default:return this.state.anno.data.map(function(t,n){return p.a.createElement(w,{anno:e.state.anno.data,idx:n,key:n,style:e.props.style,className:e.props.className,isSelected:e.props.isSelected,mode:e.state.anno.mode,svg:e.props.svg,onMouseDown:function onMouseDown(t,n){return e.onNodeMouseDown(t,n)},onMouseUp:function onMouseUp(t,n){return e.onNodeMouseUp(t,n)},onMouseLeave:function onMouseLeave(t,n){return e.handleNodeMouseLeave(t,n)}})})}}},{key:"renderInfSelectionArea",value:function renderInfSelectionArea(){switch(this.state.anno.mode){case b:return p.a.createElement(M,{enable:!0,svg:this.props.svg});default:return null}}},{key:"render",value:function render(){var e=this;return this.state.anno?p.a.createElement("g",{onMouseMove:function onMouseMove(t){return e.onMouseMove(t)},onMouseUp:function onMouseUp(t){return e.onMouseUp(t)},onMouseDown:function onMouseDown(t){return e.onMouseDown(t)}},this.renderPolygon(),this.renderNodes(),this.renderInfSelectionArea()):null}}]),BBox}(u.Component),O=function(e){function Edge(e){var t;return Object(s.a)(this,Edge),(t=Object(r.a)(this,Object(l.a)(Edge).call(this,e))).state={haloCss:"node-halo-off"},t}return Object(c.a)(Edge,e),Object(i.a)(Edge,[{key:"componentDidUpdate",value:function componentDidUpdate(){}},{key:"onMouseOver",value:function onMouseOver(e){this.props.isSelected&&this.setState({haloCss:"node-halo-on"})}},{key:"onMouseLeave",value:function onMouseLeave(e){this.props.isSelected&&this.setState({haloCss:"node-halo-off"})}},{key:"onMouseDown",value:function onMouseDown(e){this.props.onMouseDown&&this.props.onMouseDown(e,this.props.idx)}},{key:"onMouseUp",value:function onMouseUp(e){e.stopPropagation()}},{key:"render",value:function render(){var e,t,n=this;if(this.props.closingEdge){if(0===this.props.idx&&1===this.props.anno.length)return null;e=this.props.anno[this.props.anno.length-1],t=this.props.anno[0]}else{if(this.props.idx-1<0)return null;if(this.props.idx>this.props.anno.length-1)return null;e=this.props.anno[this.props.idx-1],t=this.props.anno[this.props.idx]}return p.a.createElement("g",{onMouseOver:function onMouseOver(e){n.onMouseOver(e)},onMouseLeave:function onMouseLeave(e){n.onMouseLeave(e)}},p.a.createElement("line",{x1:e.x,y1:e.y,x2:t.x,y2:t.y,stroke:"black",strokeWidth:3*this.props.style.strokeWidth,className:this.state.haloCss,onMouseOver:function onMouseOver(e){n.onMouseOver(e)},onMouseDown:function onMouseDown(e){return n.onMouseDown(e)},onMouseUp:function onMouseUp(e){return n.onMouseUp(e)}}),p.a.createElement("line",{x1:e.x,y1:e.y,x2:t.x,y2:t.y,stroke:"black",style:this.props.style,className:this.props.className,onMouseDown:function onMouseDown(e){return n.onMouseDown(e)},onMouseUp:function onMouseUp(e){return n.onMouseUp(e)}}))}}]),Edge}(u.Component),I=function(e){function Polygon(e){var t;return Object(s.a)(this,Polygon),(t=Object(r.a)(this,Object(l.a)(Polygon).call(this,e))).state={anno:void 0},t}return Object(c.a)(Polygon,e),Object(i.a)(Polygon,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.anno.mode===g){var e=this.props.anno.data[0],t=Object(a.a)({},this.props.anno,{data:[{x:e.x,y:e.y},{x:e.x+1,y:e.y}],selectedNode:1});this.setState({anno:t})}else this.setState({anno:Object(a.a)({},this.props.anno)})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.anno!==this.props.anno&&this.setState({anno:Object(a.a)({},this.props.anno)})}},{key:"onMouseMove",value:function onMouseMove(e){switch(this.state.anno.mode){case b:this.move(e.movementX/this.props.svg.scale,e.movementY/this.props.svg.scale)}}},{key:"onMouseUp",value:function onMouseUp(e){switch(this.state.anno.mode){case b:0===e.button&&(this.performedAction(this.state.anno,"annoMoved"),this.requestModeChange(this.state.anno,v))}}},{key:"onMouseDown",value:function onMouseDown(e){switch(this.state.anno.mode){case v:0===e.button&&this.props.isSelected&&this.requestModeChange(this.state.anno,b)}}},{key:"onNodeMouseUp",value:function onNodeMouseUp(e,t){switch(this.state.anno.mode){case m:this.performedAction(this.state.anno,"annoEdited"),this.requestModeChange(this.state.anno,v)}}},{key:"onNodeMouseDown",value:function onNodeMouseDown(e,t){switch(this.state.anno.mode){case g:if(2===e.button){var n=Object(o.a)(this.state.anno.data);n.push({x:n[t].x,y:n[t].y});var s=Object(a.a)({},this.state.anno,{data:n,selectedNode:this.state.anno.selectedNode+1});this.setState({anno:s}),this.performedAction(s,"annoCreatedNode")}break;case v:0===e.button&&this.requestModeChange(Object(a.a)({},this.state.anno,{selectedNode:t}),m)}}},{key:"onNodeMouseMove",value:function onNodeMouseMove(e,t){switch(this.state.anno.mode){case g:this.updateAnnoByMousePos(e,t);break;case m:e.stopPropagation(),this.updateAnnoByMousePos(e,t)}}},{key:"onNodeDoubleClick",value:function onNodeDoubleClick(e,t){switch(this.state.anno.mode){case g:this.performedAction(this.state.anno,"annoCreatedFinalNode")}}},{key:"onEdgeMouseDown",value:function onEdgeMouseDown(e,t){switch(this.state.anno.mode){case"add":this.addNode(e,t);break;case v:0===e.button&&this.requestModeChange(this.state.anno,b)}}},{key:"performedAction",value:function performedAction(e,t){this.props.onAction&&this.props.onAction(e,t)}},{key:"toPolygonStr",value:function toPolygonStr(e){return e.map(function(e){return"".concat(e.x,",").concat(e.y)}).join(" ")}},{key:"requestModeChange",value:function requestModeChange(e,t){this.props.onModeChangeRequest(e,t)}},{key:"move",value:function move(e,t){this.setState({anno:Object(a.a)({},this.state.anno,{data:f.f(this.state.anno.data,e,t)})})}},{key:"addNode",value:function addNode(e,t){var n=getMousePosition(e,this.props.svg),o=this.state.anno.data.slice(0,t);o.push(n);var s=this.state.anno.data.slice(t),i=Object(a.a)({},this.state.anno,{data:o.concat(s)});this.setState({anno:i}),this.performedAction(i,"annoAddedNode")}},{key:"updateAnnoByMousePos",value:function updateAnnoByMousePos(e,t){var n=getMousePosition(e,this.props.svg),s=Object(o.a)(this.state.anno.data);s[t].x=n.x,s[t].y=n.y,this.setState({anno:Object(a.a)({},this.state.anno,{data:s})})}},{key:"getResult",value:function getResult(){return this.state.anno}},{key:"renderNodes",value:function renderNodes(){var e=this;if(!this.props.isSelected)return null;switch(this.state.anno.mode){case b:return null;case m:case g:return p.a.createElement(w,{anno:this.state.anno.data,idx:this.state.anno.selectedNode,key:this.state.anno.selectedNode,style:this.props.style,className:this.props.className,isSelected:this.props.isSelected,mode:this.state.anno.mode,svg:this.props.svg,onMouseDown:function onMouseDown(t,n){return e.onNodeMouseDown(t,n)},onMouseUp:function onMouseUp(t,n){return e.onNodeMouseUp(t,n)},onDoubleClick:function onDoubleClick(t,n){return e.onNodeDoubleClick(t,n)},onMouseMove:function onMouseMove(t,n){return e.onNodeMouseMove(t,n)}});default:return this.state.anno.data.map(function(t,n){return p.a.createElement(w,{anno:e.state.anno.data,idx:n,key:n,style:e.props.style,className:e.props.className,isSelected:e.props.isSelected,mode:e.state.anno.mode,svg:e.props.svg,onMouseDown:function onMouseDown(t,n){return e.onNodeMouseDown(t,n)},onMouseUp:function onMouseUp(t,n){return e.onNodeMouseUp(t,n)},onDoubleClick:function onDoubleClick(t,n){return e.onNodeDoubleClick(t,n)},onMouseMove:function onMouseMove(t,n){return e.onNodeMouseMove(t,n)}})})}}},{key:"renderEdges",value:function renderEdges(){var e=this;if(!this.props.isSelected)return null;switch(this.state.anno.mode){case v:case"add":var t=this.state.anno.data.map(function(t,n){return p.a.createElement(O,{anno:e.state.anno.data,idx:n,key:n,style:e.props.style,className:e.props.className,isSelected:e.props.isSelected,onMouseDown:function onMouseDown(t,n){e.onEdgeMouseDown(t,n)}})});return t.push(p.a.createElement(O,{anno:this.state.anno.data,closingEdge:!0,key:t.length,idx:0,style:this.props.style,className:this.props.className,isSelected:this.props.isSelected,onMouseDown:function onMouseDown(t,n){e.onEdgeMouseDown(t,n)}})),t;default:return null}}},{key:"renderPolygon",value:function renderPolygon(){return p.a.createElement("polygon",{points:this.toPolygonStr(this.state.anno.data),fill:"none",stroke:"purple",style:this.props.style,className:this.props.className})}},{key:"renderInfSelectionArea",value:function renderInfSelectionArea(){switch(this.state.anno.mode){case b:return p.a.createElement(M,{enable:!0,svg:this.props.svg});default:return null}}},{key:"render",value:function render(){var e=this;return this.state.anno?p.a.createElement("g",{onMouseMove:function onMouseMove(t){return e.onMouseMove(t)},onMouseUp:function onMouseUp(t){return e.onMouseUp(t)},onMouseDown:function onMouseDown(t){return e.onMouseDown(t)}},this.renderPolygon(),this.renderEdges(),this.renderNodes(),this.renderInfSelectionArea()):p.a.createElement("g",null)}}]),Polygon}(u.Component),x=function(e){function Line(){return Object(s.a)(this,Line),Object(r.a)(this,Object(l.a)(Line).apply(this,arguments))}return Object(c.a)(Line,e),Object(i.a)(Line,[{key:"renderEdges",value:function renderEdges(){var e=this;if(!this.props.isSelected)return null;switch(this.state.anno.mode){case v:case"add":return this.state.anno.data.map(function(t,n){return p.a.createElement(O,{anno:e.state.anno.data,idx:n,key:n,style:e.props.style,className:e.props.className,isSelected:e.props.isSelected,onMouseDown:function onMouseDown(t,n){e.onEdgeMouseDown(t,n)}})});default:return null}}},{key:"renderPolyline",value:function renderPolyline(){return p.a.createElement("polyline",{points:this.toPolygonStr(this.state.anno.data),fill:"none",stroke:"purple",style:Object(a.a)({},this.props.style,{fill:"none"}),className:this.props.className})}},{key:"render",value:function render(){var e=this;return this.state.anno?p.a.createElement("g",{onMouseMove:function onMouseMove(t){return e.onMouseMove(t)},onMouseUp:function onMouseUp(t){return e.onMouseUp(t)},onMouseDown:function onMouseDown(t){return e.onMouseDown(t)}},this.renderPolyline(),this.renderEdges(),this.renderNodes(),this.renderInfSelectionArea()):p.a.createElement("g",null)}}]),Line}(I),E="new",D=["#46aed7","#e28f81","#50b897","#88712f","#9cb067","#a4527d","#a55046","#6e90da","#487b3b","#6360a7","#cd8fd3","#d5a442","#cf7635","#da4971","#a4b137","#d44da4","#aa54be","#5ab74d","#7166d9","#d14734"],j=20;function getDefaultColor(){return D[0]}function allowedToLabel(e,t){return!!e.label||(console.warn("You may not edit the label of this annotation as defined by config!",t),!1)}var N=n(485),L=function(e){function Annotation(e){var t;return Object(s.a)(this,Annotation),(t=Object(r.a)(this,Object(l.a)(Annotation).call(this,e))).state={selAreaCss:"sel-area-off",visibility:"visible",anno:void 0},t.myAnno=p.a.createRef(),t}return Object(c.a)(Annotation,e),Object(i.a)(Annotation,[{key:"componentWillMount",value:function componentWillMount(){this.setState({anno:Object(a.a)({},this.props.data)})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.data!==this.props.data&&this.setState({anno:Object(a.a)({},this.props.data)}),e.showSingleAnno!==this.props.showSingleAnno&&(void 0===this.props.showSingleAnno?this.setVisible(!0):this.props.showSingleAnno!==this.props.data.id?this.setVisible(!1):this.setVisible(!0))}},{key:"onClick",value:function onClick(e){e.stopPropagation(),this.performedAction(this.state.anno,"annoSselected")}},{key:"onMouseDown",value:function onMouseDown(e){e.preventDefault(),this.props.onMouseDown&&this.props.onMouseDown(e)}},{key:"onContextMenu",value:function onContextMenu(e){e.preventDefault()}},{key:"handleModeChangeRequest",value:function handleModeChangeRequest(e,t){this.setMode(e,t)}},{key:"performedAction",value:function performedAction(e,t){this.props.onAction&&this.props.onAction(e,t)}},{key:"notify",value:function notify(e){this.props.onNotification&&this.props.onNotification(e)}},{key:"performedAnnoAction",value:function performedAnnoAction(e,t){switch(t){case"annoCreatedFinalNode":case"annoEdited":case"annoMoved":case"annoCreated":var n=f.a(e.data,this.props.svg),o=Object(a.a)({},e,{data:n}),s=f.b(n,this.props.svg,e.type,this.props.image);void 0!==s&&s<this.props.canvasConfig.annos.minArea?(this.notify({title:"Annotation to small",message:"Annotation area was "+Math.round(s)+"px but needs to be bigger than "+this.props.canvasConfig.annos.minArea+" px",type:N.d}),this.setMode(o,"deleted")):this.performedAction(o,t);break;default:this.performedAction(e,t)}}},{key:"setAnnoMode",value:function setAnnoMode(e,t){this.setState({anno:Object(a.a)({},e,{mode:t})})}},{key:"setMode",value:function setMode(e,t){if(e.mode!==t)switch(t){case"editLabel":allowedToLabel(this.props.allowedActions,e)&&this.setAnnoMode(e,t);break;case"deleted":this.setAnnoMode(e,t);var n=Object(a.a)({},e,{mode:t.DELETED});this.performedAction(n,"annoDeleted");break;case b:this.setAnnoMode(e,t),this.performedAction(e,"annoEnterMoveMode");break;case m:this.setAnnoMode(e,t),this.performedAction(e,"annoEnterEditMode");break;default:this.setAnnoMode(e,t)}}},{key:"setVisible",value:function setVisible(e){e?"visible"!==this.state.visibility&&this.setState({visibility:"visible"}):"hidden"!==this.state.visibility&&this.setState({visibility:"hidden"})}},{key:"isSelected",value:function isSelected(){return!!function allowedToEdit(e,t){var n=t.status;return!n||n===E||!!e.edit||(console.warn("You may not edit bounds of this annotation as defined by config!",t),!1)}(this.props.allowedActions,this.state.anno)&&this.props.selectedAnno===this.props.data.id}},{key:"getResult",value:function getResult(){return Object(a.a)({},this.state.anno,{data:this.myAnno.current.state.anno,createMode:this.myAnno.current.state.mode===g})}},{key:"getLabel",value:function getLabel(e){return this.props.possibleLabels.find(function(t){return t.id===e})}},{key:"getColor",value:function getColor(){return this.state.anno.labelIds.length>0?this.getLabel(this.state.anno.labelIds[0]).color:getDefaultColor()}},{key:"getStyle",value:function getStyle(){var e=this.getColor();return this.isSelected(),{stroke:e,fill:e,strokeWidth:this.props.uiConfig.strokeWidth/this.props.svg.scale,r:this.props.uiConfig.nodeRadius/this.props.svg.scale}}},{key:"getCssClass",value:function getCssClass(){return this.isSelected()?"selected":"not-selected"}},{key:"renderAnno",value:function renderAnno(){var e=this;switch(this.props.type){case"point":return p.a.createElement(S,{ref:this.myAnno,anno:this.state.anno,style:this.getStyle(),className:this.getCssClass(),isSelected:this.isSelected(),svg:this.props.svg,onModeChangeRequest:function onModeChangeRequest(t,n){return e.handleModeChangeRequest(t,n)},onAction:function onAction(t,n){return e.performedAnnoAction(t,n)}});case"bBox":return p.a.createElement(A,{ref:this.myAnno,anno:this.state.anno,style:this.getStyle(),className:this.getCssClass(),onNodeClick:function onNodeClick(t,n){return e.onNodeClick(t,n)},onNodeMouseDown:function onNodeMouseDown(t,n){return e.onNodeMouseDown(t,n)},isSelected:this.isSelected(),svg:this.props.svg,onModeChangeRequest:function onModeChangeRequest(t,n){return e.handleModeChangeRequest(t,n)},onAction:function onAction(t,n){return e.performedAnnoAction(t,n)}});case"polygon":return p.a.createElement(I,{ref:this.myAnno,anno:this.state.anno,style:this.getStyle(),className:this.getCssClass(),onNodeClick:function onNodeClick(t,n){return e.onNodeClick(t,n)},isSelected:this.isSelected(),svg:this.props.svg,onModeChangeRequest:function onModeChangeRequest(t,n){return e.handleModeChangeRequest(t,n)},onAction:function onAction(t,n){return e.performedAnnoAction(t,n)}});case"line":return p.a.createElement(x,{ref:this.myAnno,anno:this.state.anno,style:this.getStyle(),className:this.getCssClass(),isSelected:this.isSelected(),svg:this.props.svg,onAction:function onAction(t,n){return e.performedAnnoAction(t,n)},onModeChangeRequest:function onModeChangeRequest(t,n){return e.handleModeChangeRequest(t,n)}});default:console.error("Wrong annoType for annotations: ",this.props.annoType)}}},{key:"renderAnnoBar",value:function renderAnnoBar(){var e=this;return p.a.createElement(C,{anno:this.state.anno,mode:this.state.anno.mode,possibleLabels:this.props.possibleLabels,onClick:function onClick(t){return e.onClick(t)},style:this.getStyle(),svg:this.props.svg,defaultLabel:this.props.defaultLabel})}},{key:"render",value:function render(){var e=this;return this.state.anno.data&&this.props.possibleLabels?"deleted"===this.state.anno.status?null:p.a.createElement("g",null,p.a.createElement("g",{visibility:this.state.visibility,onClick:function onClick(t){return e.onClick(t)},onMouseDown:function onMouseDown(t){return e.onMouseDown(t)},onContextMenu:function onContextMenu(t){return e.onContextMenu(t)}},this.renderAnnoBar(),this.renderAnno())):null}}]),Annotation}(u.Component),P=n(978),T=n(973),U=n(979),R=n(972),B=function(e){function LabelInput(e){var t;return Object(s.a)(this,LabelInput),(t=Object(r.a)(this,Object(l.a)(LabelInput).call(this,e))).state={label:[],possibleLabels:[],performInit:!0,enterHits:0,confirmLabel:0},t.inputRef=p.a.createRef(),t}return Object(c.a)(LabelInput,e),Object(i.a)(LabelInput,[{key:"componentWillMount",value:function componentWillMount(){this.updatePossibleLabels()}},{key:"componentDidMount",value:function componentDidMount(){this.props.initLabelIds&&this.setState({performInit:!0})}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){this.props.visible&&this.props.focusOnRender&&this.inputRef.current&&this.inputRef.current.click(),t.confirmLabel!==this.state.confirmLabel&&(this.annoLabelUpdate(this.state.label),this.closeLabelInput()),e.possibleLabels!==this.props.possibleLabels&&this.updatePossibleLabels(),this.props.initLabelIds&&(this.state.performInit&&(this.setState({performInit:!1}),this.props.initLabelIds.length>0?this.setState({label:this.props.initLabelIds}):this.setState({label:[]})),e.initLabelIds!==this.props.initLabelIds&&this.setState({performInit:!0})),e.relatedId!==this.props.relatedId&&this.setState({performInit:!0})}},{key:"onKeyDown",value:function onKeyDown(e){e.stopPropagation(),this.performKeyAction(e.key)}},{key:"onChange",value:function onChange(e,t){var n;n=this.props.multilabels?-1!==t.value?t.value:[]:-1!==t.value?[t.value]:[],this.setState({label:n}),this.annoLabelUpdate(n)}},{key:"onItemClick",value:function onItemClick(e,t){this.confirmLabel()}},{key:"updatePossibleLabels",value:function updatePossibleLabels(){var e=this,t=[],n=this.props.defaultLabel?this.props.defaultLabel:"no label";this.props.possibleLabels.length>0&&(t=this.props.possibleLabels.map(function(t){return{key:t.id,value:t.id,text:t.label,content:p.a.createElement("div",{onClick:function onClick(n){return e.onItemClick(n,t.id)}},t.label)}})),t.unshift({key:-1,value:-1,text:n,content:p.a.createElement("div",{onClick:function onClick(t){return e.onItemClick(t,-1)}},n)}),this.setState({possibleLabels:t})}},{key:"performKeyAction",value:function performKeyAction(e){switch(e){case"Enter":this.props.multilabels||this.props.visible&&this.confirmLabel();break;case"Escape":this.closeLabelInput()}}},{key:"annoLabelUpdate",value:function annoLabelUpdate(e){this.props.onLabelUpdate&&this.props.onLabelUpdate(e.filter(function(e){return-1!==e}))}},{key:"confirmLabel",value:function confirmLabel(){this.setState({confirmLabel:this.state.confirmLabel+1})}},{key:"closeLabelInput",value:function closeLabelInput(){this.props.onClose&&this.props.onClose()}},{key:"renderLabelInput",value:function renderLabelInput(){var e,t=this;return e=this.props.multilabels?this.state.label:this.state.label.length>0?this.state.label[0]:-1,p.a.createElement(P.a,{innerRef:this.inputRef},p.a.createElement(T.a,{multiple:this.props.multilabels,search:!0,selection:!0,closeOnChange:!0,icon:"search",options:this.state.possibleLabels,placeholder:"Enter label",tabIndex:0,onKeyDown:function onKeyDown(e){return t.onKeyDown(e)},value:e,onChange:function onChange(e,n){return t.onChange(e,n)},style:{opacity:.8},disabled:this.props.disabled,open:this.props.open}))}},{key:"renderLabelInfo",value:function renderLabelInfo(){var e=this;if(!this.state.label)return null;var t=void 0;return this.state.label.length>0&&(t=this.props.possibleLabels.find(function(t){return e.state.label[e.state.label.length-1]===t.id})),t?p.a.createElement("div",null,p.a.createElement(U.a,null,t.label),p.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}})):"No label"}},{key:"renderPopupContent",value:function renderPopupContent(){return p.a.createElement("div",null,this.renderLabelInfo())}},{key:"render",value:function render(){return this.props.visible?this.props.renderPopup?p.a.createElement(R.a,{trigger:this.renderLabelInput(),content:this.renderPopupContent(),open:!0,position:"right center",style:{opacity:.9}}):this.renderLabelInput():null}}]),LabelInput}(u.Component),H=function(e){function AnnoLabelInput(e){var t;return Object(s.a)(this,AnnoLabelInput),(t=Object(r.a)(this,Object(l.a)(AnnoLabelInput).call(this,e))).state={top:400,left:100,label:void 0,visibility:"hidden",possibleLabels:[]},t.inputGroupRef=p.a.createRef(),t}return Object(c.a)(AnnoLabelInput,e),Object(i.a)(AnnoLabelInput,[{key:"componentWillMount",value:function componentWillMount(){this.setPosition()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.visible&&this.setPosition()}},{key:"setPosition",value:function setPosition(){if(this.props.mousePos){var e=this.props.mousePos.y+this.props.svg.top-10,t=this.props.mousePos.x+this.props.svg.left-10;this.state.top===e&&this.state.left===t||this.setState({top:e,left:t})}}},{key:"onClose",value:function onClose(){this.props.onClose&&this.props.onClose()}},{key:"annoLabelUpdate",value:function annoLabelUpdate(e){this.props.onLabelUpdate&&this.props.onLabelUpdate(e)}},{key:"updateAnnoLabel",value:function updateAnnoLabel(e){allowedToLabel(this.props.allowedActions,this.props.selectedAnno)&&this.annoLabelUpdate(Object(a.a)({},this.props.selectedAnno,{labelIds:e,status:this.props.selectedAnno.status!==E?"changed":E}))}},{key:"render",value:function render(){var e=this;return this.props.visible?p.a.createElement("div",{ref:this.inputGroupRef,style:{position:"fixed",top:this.state.top,left:this.state.left}},p.a.createElement(B,{svg:this.props.svg,onClose:function onClose(){return e.onClose()},initLabelIds:this.props.selectedAnno.labelIds,relatedId:this.props.selectedAnno.id,visible:this.props.visible,onLabelUpdate:function onLabelUpdate(t){return e.updateAnnoLabel(t)},possibleLabels:this.props.possibleLabels,multilabels:this.props.multilabels,disabled:!this.props.allowedActions.label,renderPopup:!0,focusOnRender:!0,open:!0,defaultLabel:this.props.defaultLabel})):null}}]),AnnoLabelInput}(u.Component),F=n(976),_=function(e){function ImgBar(e){var t;return Object(s.a)(this,ImgBar),(t=Object(r.a)(this,Object(l.a)(ImgBar).call(this,e))).state={position:{top:0,left:0}},t}return Object(c.a)(ImgBar,e),Object(i.a)(ImgBar,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.svg!==e.svg&&this.setState({position:Object(a.a)({},this.state.position,{left:this.props.svg.left,top:this.props.svg.top})})}},{key:"handleLabelUpdate",value:function handleLabelUpdate(e){this.props.onLabelUpdate&&this.props.onLabelUpdate(e)}},{key:"handleClose",value:function handleClose(){this.props.onClose&&this.props.onClose()}},{key:"handleMouseEnter",value:function handleMouseEnter(e){this.props.onMouseEnter&&this.props.onMouseEnter(e)}},{key:"renderImgLabels",value:function renderImgLabels(){var e,t=this,n="";return this.props.imgLabelIds&&this.props.imgLabelIds.length>0?(this.props.imgLabelIds.forEach(function(o,a){e=t.props.possibleLabels.find(function(e){return e.id===o}),a>0&&(n+=", "),n+=e.label}),p.a.createElement(F.a.Item,null,n)):null}},{key:"render",value:function render(){var e=this;return this.props.visible&&this.props.annos.image?p.a.createElement("div",{style:{position:"fixed",top:this.state.position.top,left:this.state.position.left,width:this.props.svg.width,minWidth:"300px"},onMouseEnter:function onMouseEnter(t){e.handleMouseEnter(t)}},p.a.createElement(F.a,{inverted:!0,style:{opacity:.9,justifyContent:"center",alignItems:"center"}},p.a.createElement(F.a.Item,null,this.props.annos.image.url.split("/").pop()+" (ID: "+this.props.annos.image.id+")"),p.a.createElement(F.a.Item,null,this.props.annos.image.number+" / "+this.props.annos.image.amount),this.renderImgLabels())):null}}]),ImgBar}(u.Component),V=n(533),W=function(e){function AnnoToolBar(e){var t;return Object(s.a)(this,AnnoToolBar),(t=Object(r.a)(this,Object(l.a)(AnnoToolBar).call(this,e))).state={top:400,left:100,width:50,label:void 0,visibility:"hidden",possibleLabels:[]},t.inputGroupRef=p.a.createRef(),t}return Object(c.a)(AnnoToolBar,e),Object(i.a)(AnnoToolBar,[{key:"componentWillMount",value:function componentWillMount(){this.setPosition()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.visible&&this.setPosition()}},{key:"setPosition",value:function setPosition(){if(this.props.selectedAnno){var e=f.e(this.props.selectedAnno.data);e=f.d(e)[0];var t=this.inputGroupRef.current.getBoundingClientRect(),n=this.props.svg.top+(e.y+this.props.svg.translateY)*this.props.svg.scale-44,o=this.props.svg.left+(e.x+this.props.svg.translateX)*this.props.svg.scale-t.width/2-1;n<0&&(n=this.props.svg.top+(e.y+this.props.svg.translateY+10)*this.props.svg.scale),this.state.top===n&&this.state.left===o||this.setState({top:n,left:o})}}},{key:"onClose",value:function onClose(){this.props.onClose&&this.props.onClose()}},{key:"handleClick",value:function handleClick(e){this.props.onClick&&this.props.onClick(e)}},{key:"renderDaviIcon",value:function renderDaviIcon(){var e=this;return p.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1190.549 841.891",width:"60px",onClick:function onClick(t){return e.handleClick(t)}},p.a.createElement("g",{id:"Info"},p.a.createElement("path",{id:"Maps",fill:this.props.color,d:"M620.561,817.217c-1.568-3.62-3.771-7.101-4.611-10.885 c-24.452-109.811-74.341-207.569-139.215-298.675c-27.507-38.628-55.814-77.404-77.438-119.371 C324.363,242.85,402.696,58.71,574.209,26.508c145.509-27.32,282.953,75.871,296.543,222.773 c4.659,50.356-7.471,97.96-32.152,141.022c-27.812,48.526-58.75,95.364-90.073,141.758 c-50.917,75.411-91.062,155.558-113.421,244.091c-2.438,9.652-3.936,19.543-6.271,29.227c-0.992,4.104-3.023,7.961-4.584,11.93 C623.021,817.277,621.789,817.247,620.561,817.217z"}),p.a.createElement("path",{id:"Text",fillRule:"evenodd",clipRule:"evenodd",fill:"#FFFFFF",d:"M724.709,250.898 c-0.055-3.974,0.047-7.949,0.033-11.923c-0.007-1.228-1.54-2.767-2.76-2.777c-2.428-0.021-4.862-0.015-7.29-0.015 c-22.466,0.001-44.934,0.005-67.404,0.009c-2.475,0.001-3.658,1.154-3.658,3.588c-0.001,47.365-0.001,94.73-0.001,142.096 c0,13.526,0,27.05,0.001,40.577c0,2.305,1.274,3.584,3.562,3.59c6.623,0.004,9.256-0.07,19.873,0.004 c10.618,0.072,14.146,8.543,14.146,14.189c-0.002,5.645-4.233,13.055-14.299,13.367c-13.135,0.061-26.277-0.02-39.414-0.014 c-14.575,0.004-29.146,0.004-43.722,0.02c-4.191-0.084-13.717-2.789-13.717-13.492s6.233-13.643,13.132-14.117 c4.979,0.037,13.802,0.057,20.701,0.049c1.695,0,3.11-1.537,3.11-3.361c0.003-13.912-0.004-27.823-0.004-41.736 c0-30.252,0-60.503,0.002-90.754c0.002-17.03,0.005-33.649,0.002-50.678c0-1.991-1.38-3.336-3.396-3.336 c-24.79,0-49.577,0-74.362,0c-2.133,0-3.38,1.22-3.383,3.308c-0.006,3.754-0.011,7.509,0.005,11.262 c-0.023,6.339-3.067,13.143-12.456,13.143c-9.389,0-14.337-4.647-14.915-13.23c-0.128-4.305,0.004-8.612,0.004-12.918 c0-8.392,0-16.781,0-25.173c0-0.321,0.228-5.156,4.091-9.277c3.864-4.122,8.014-3.822,8.445-3.822 c25.835,0.003,51.672,0.002,77.507,0.002c46.813,0.001,140.443,0.001,140.443,0.001s6.153-0.088,10.926-0.052 c0.3-0.008,5.713,0.363,9.178,3.994c3.46,3.631,3.046,8.407,3.046,8.635c-0.007,12.862,0.079,25.725-0.003,38.587 c-0.074,8.051-6.938,12.819-13.703,12.847C731.482,263.519,724.956,259.059,724.709,250.898z"})))}},{key:"render",value:function render(){return this.props.visible?p.a.createElement("div",{ref:this.inputGroupRef,style:{position:"fixed",top:this.state.top,left:this.state.left,cursor:"pointer"}},this.renderDaviIcon()):null}}]),AnnoToolBar}(u.Component),K=function(){function KeyMapper(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(s.a)(this,KeyMapper),this.controlDown=!1,this.keyActionHandler=e}return Object(i.a)(KeyMapper,[{key:"keyDown",value:function keyDown(e){switch(e){case"Enter":this.triggerKeyAction("editLabel");break;case"Delete":case"Backspace":this.triggerKeyAction("deleteAnno");break;case"Control":this.controlDown=!0,this.triggerKeyAction("enterAnnoAddMode");break;case"z":this.controlDown&&this.triggerKeyAction("undo");break;case"r":this.controlDown&&this.triggerKeyAction("redo");break;case"Tab":this.triggerKeyAction("traverseAnnos");break;case"w":this.triggerKeyAction("camMoveUp");break;case"s":this.triggerKeyAction("camMoveDown");break;case"a":this.triggerKeyAction("camMoveLeft");break;case"d":this.triggerKeyAction("camMoveRight")}}},{key:"keyUp",value:function keyUp(e){switch(e){case"Control":this.controlDown=!1,this.triggerKeyAction("leaveAnnoAddMode")}}},{key:"triggerKeyAction",value:function triggerKeyAction(e){this.keyActionHandler&&this.keyActionHandler(e)}}]),KeyMapper}(),q=n(534),Y=function(){function UndoRedo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(s.a)(this,UndoRedo),this.hist=[],this.pointer=0,this.maxElements=e}return Object(i.a)(UndoRedo,[{key:"push",value:function push(e){var t={entry:e,description:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"No description"};if(0!==this.pointer)for(;0!==this.pointer;)this.pointer--,this.hist.shift();this.hist.unshift(t),this.hist.length>this.maxElements&&this.hist.pop()}},{key:"undo",value:function undo(){return this.pointer+1<this.hist.length?(this.pointer++,this.hist[this.pointer]):this.hist[this.hist.length-1]}},{key:"undoMia",value:function undoMia(){return this.pointer+1<this.hist.length?(this.pointer++,this.hist[this.pointer-1]):this.hist[this.hist.length-1]}},{key:"redo",value:function redo(){return this.pointer-1>=0?(this.pointer--,this.hist[this.pointer]):this.hist[0]}},{key:"getHist",value:function getHist(){return this.hist}},{key:"clearHist",value:function clearHist(){this.hist=[]}},{key:"isEmpty",value:function isEmpty(){return 0===this.hist.length}}]),UndoRedo}(),G=n(975),X=n(68),z=n(977),J=n(421),Z=n.n(J),$=n(4),Q=n.n($),ee=(n(0),n(465)),te=n(704),ne=n(705),oe=n(422);function Loader(e){var t=e.active,n=e.children,o=e.className,a=e.content,s=e.disabled,i=e.indeterminate,r=e.inline,l=e.inverted,c=e.size,u=Q()("ui",c,Object(ee.a)(t,"active"),Object(ee.a)(s,"disabled"),Object(ee.a)(i,"indeterminate"),Object(ee.a)(l,"inverted"),Object(ee.a)(n||a,"text"),Object(ee.b)(r,"inline"),"loader",o),d=Object(te.a)(Loader,e),h=Object(ne.a)(Loader,e);return p.a.createElement(h,Z()({},d,{className:u}),oe.a.isNil(n)?a:n)}Loader.handledProps=["active","as","children","className","content","disabled","indeterminate","inline","inverted","size"],Loader.propTypes={};var ae=Loader;function getViewportCoordinates(e,t){var n={xMin:-1*t.translateX,xMax:-1*t.translateX+t.width/t.scale,yMin:-1*t.translateY,yMax:-1*t.translateY+t.height/t.scale},o={xMin:0,xMax:t.width,yMin:0,yMax:t.height},a=(o.xMax-o.xMin)/(n.xMax-n.xMin),s=(o.yMax-o.yMin)/(n.yMax-n.yMin);return{window:n,viewport:o,vX:o.xMin+(e.x-n.xMin)*a,vY:o.yMin+(e.y-n.yMin)*s,scaleX:a,scaleY:s}}function getZoomTranslation(e,t,n){var o=t.scale,a={x:0,y:0};return a.x=o/n*(e.x+t.translateX)-e.x,a.y=o/n*(e.y+t.translateY)-e.y,a}n(535);var se=n(461),ie=(n(472),n(74)),re=function(e){function ROITable(e){var t;return Object(s.a)(this,ROITable),(t=Object(r.a)(this,Object(l.a)(ROITable).call(this,e))).state={annos:[],width:"100%",height:"100%",possibleLabels:[]},t.renderEditableCell=t.renderEditableCell.bind(Object(ie.a)(Object(ie.a)(t))),t.selectLabel=t.selectLabel.bind(Object(ie.a)(Object(ie.a)(t))),t.onLabelROITableRowClick=t.onLabelROITableRowClick.bind(Object(ie.a)(Object(ie.a)(t))),t}return Object(c.a)(ROITable,e),Object(i.a)(ROITable,[{key:"componentDidUpdate",value:function componentDidUpdate(e){e!==this.props&&this.setState({annos:this.props.annos,top:this.props.svg.top,left:this.props.svg.left,possibleLabels:this.props.possibleLabels})}},{key:"onLabelROITableRowClick",value:function onLabelROITableRowClick(e,t,n,o){var a=this;return{onClick:function onClick(e){var n=t.original.id;a.props.selectAnnotation(n)}}}},{key:"selectLabel",value:function selectLabel(e){if("create"===e.original.mode)return"no label";if("view"===e.original.mode||"editLabel"===e.original.mode){var t=this.props.possibleLabels.filter(function(t){return t.id===e.original.labelIds[0]});return t.length>0?t[0].label:"no label"}return e.value}},{key:"renderEditableCell",value:function renderEditableCell(e){var t=this,n=[].concat(this.state.annos).sort(function(e,t){return e.id>t.id?1:-1});return p.a.createElement("div",{contentEditable:!0,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:n[e.index][e.column.id]},onBlur:function onBlur(n){var o=n.target.innerHTML,a=t.state.annos.filter(function(t){return t.id===e.original.id})[0];a[e.column.id]=o,t.props.updateSelectedAnno(a)}})}},{key:"render",value:function render(){console.log("Available annos",this.props.annos);var e=[{Header:"Label Name",accessor:"id",Cell:this.selectLabel},{Header:"Label Value",accessor:"labelValue",Cell:this.renderEditableCell}],t=[].concat(this.state.annos).sort(function(e,t){return e.id>t.id?1:-1}),n=this.props.svg.left+this.props.svg.width+10;return this.props.annos&&this.props.annos.length>0?p.a.createElement("div",{style:{position:"fixed",top:this.props.svg.top,left:n,width:250}},p.a.createElement(se.a,{data:t,columns:e,pageSize:this.props.annos.length,className:"-striped -highlight",showPagination:!1,NoDataComponent:function NoDataComponent(){return null},getTrProps:this.onLabelROITableRowClick})):null}}]),ROITable}(u.Component),le=function(e){function Canvas(e){var t;return Object(s.a)(this,Canvas),(t=Object(r.a)(this,Object(l.a)(Canvas).call(this,e))).state={svg:{width:"100%",height:"100%",scale:1,translateX:0,translateY:0},image:{width:void 0,height:void 0},annos:[],mode:v,selectedAnnoId:void 0,showSingleAnno:void 0,showLabelInput:!1,imageLoaded:!1,imgLoadCount:0,imgLabelIds:[],imgLabelChanged:!1,performedImageInit:!1,prevLabel:[],imageData:void 0,isJunk:!1,imgBarVisible:!1,annoToolBarVisible:!1,possibleLabels:void 0},t.img=p.a.createRef(),t.svg=p.a.createRef(),t.container=p.a.createRef(),t.hist=new Y,t.keyMapper=new K(function(e){return t.handleKeyAction(e)}),t.mousePosAbs=void 0,t}return Object(c.a)(Canvas,e),Object(i.a)(Canvas,[{key:"componentDidMount",value:function componentDidMount(){this.updatePossibleLabels()}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){e.annos!==this.props.annos&&(this.setState({imgLabelIds:this.props.annos.image.labelIds}),this.setState({imageLoaded:!1})),e.isJunk!==this.props.isJunk&&this.state.isJunk!==this.props.isJunk&&this.setState({isJunk:this.props.isJunk}),this.state.imageData!==this.props.image.data&&this.setState({imageData:this.props.image.data}),this.props.possibleLabels!==e.possibleLabels&&this.updatePossibleLabels(),this.state.performedImageInit&&(this.setState({performedImageInit:!1,annoToolBarVisible:!1}),this.props.imgBarVisible&&this.setState({imgBarVisible:!0}),this.hist.clearHist(),this.hist.push(Object(a.a)({},this.getAnnos(),{selectedAnnoId:void 0}),"init")),this.state.imageLoaded&&(this.putSelectedOnTop(t),t.imgLoadCount!==this.state.imgLoadCount&&(this.updateCanvasView(this.props.annos.annotations),this.setImageLabels(this.props.annos.image.labelIds),this.setState({performedImageInit:!0})),e.layoutUpdate!==this.props.layoutUpdate&&(this.selectAnnotation(void 0),this.updateCanvasView(this.getAnnoBackendFormat())))}},{key:"onImageLoad",value:function onImageLoad(){this.setState({imageLoaded:!0,imgLoadCount:this.state.imgLoadCount+1,showLabelInput:!1,showSingleAnno:void 0,selectedAnnoId:void 0}),this.props.onImageLoaded&&this.props.onImageLoaded()}},{key:"onMouseOver",value:function onMouseOver(){this.svg.current.focus()}},{key:"onWheel",value:function onWheel(e){var t,n,o=e.deltaY<0,s=this.getMousePosition(e);(t=o?1.25*this.state.svg.scale:this.state.svg.scale/1.25)<1?(t=1,n={x:0,y:0}):t>200?(t=200,n=getZoomTranslation(s,this.state.svg,t)):n=getZoomTranslation(s,this.state.svg,t),this.setState({svg:Object(a.a)({},this.state.svg,{scale:t,translateX:n.x,translateY:n.y})})}},{key:"onRightClick",value:function onRightClick(e){e.preventDefault()}},{key:"onMouseDown",value:function onMouseDown(e){0===e.button?this.selectAnnotation(void 0):1===e.button?this.setMode("cameraMove"):2===e.button&&this.createNewAnnotation(e)}},{key:"onAnnoMouseDown",value:function onAnnoMouseDown(e){if(1===e.button)this.setMode("cameraMove");else if(2===e.button)this.createNewAnnotation(e);else if(0===e.button&&this.state.showLabelInput){var t=this.findAnno(this.state.selectedAnnoId);this.updateSelectedAnno(t,v),this.showSingleAnno(void 0),this.showLabelInput(!1)}}},{key:"onMouseUp",value:function onMouseUp(e){switch(e.button){case 1:this.setMode(v)}}},{key:"handleKeyAction",value:function handleKeyAction(e){var t=this.findAnno(this.state.selectedAnnoId),n=20*this.state.svg.scale;switch(e){case"editLabel":this.editAnnoLabel();break;case"deleteAnno":this.onAnnoPerformedAction(t,"annoDeleted");break;case"enterAnnoAddMode":t&&this.updateSelectedAnno(t,"add");break;case"leaveAnnoAddMode":t&&this.updateSelectedAnno(t,v);break;case"undo":this.undo();break;case"redo":this.redo();break;case"traverseAnnos":this.traverseAnnos();break;case"camMoveLeft":this.moveCamera(n,0);break;case"camMoveRight":this.moveCamera(-n,0);break;case"camMoveUp":this.moveCamera(0,n);break;case"camMoveDown":this.moveCamera(0,-n);break;case"camMoveStop":break;default:console.warn("Unknown key action",e)}}},{key:"onKeyDown",value:function onKeyDown(e){e.preventDefault(),this.keyMapper.keyDown(e.key),this.props.onKeyDown&&this.props.onKeyDown(e)}},{key:"onKeyUp",value:function onKeyUp(e){e.preventDefault(),this.keyMapper.keyUp(e.key),this.props.onKeyUp&&this.props.onKeyUp(e)}},{key:"onMouseMove",value:function onMouseMove(e){"cameraMove"===this.state.mode&&this.moveCamera(e.movementX,e.movementY)}},{key:"onLabelInputDeleteClick",value:function onLabelInputDeleteClick(e){this.removeSelectedAnno()}},{key:"onAnnoPerformedAction",value:function onAnnoPerformedAction(e,t){var n=void 0;switch(t){case"annoSselected":this.selectAnnotation(e.id);break;case"annoStartCreating":n=this.updateSelectedAnno(e),this.pushHist(n,e.id,t,this.state.showSingleAnno);break;case"annoCreated":n=this.updateSelectedAnno(e,v),this.pushHist(n,e.id,t,void 0),this.showSingleAnno(void 0),this.setState({annoToolBarVisible:!0});break;case"annoMoved":n=this.updateSelectedAnno(e,v),this.showSingleAnno(void 0),this.pushHist(n,e.id,t,void 0),this.setState({annoToolBarVisible:!0});break;case"annoEnterMoveMode":this.showSingleAnno(e.id),this.setState({annoToolBarVisible:!1});break;case"annoEnterEditMode":this.setState({annoToolBarVisible:!1});break;case"annoAddedNode":n=this.updateSelectedAnno(e,v),this.pushHist(n,e.id,t,this.state.showSingleAnno);break;case"annoEdited":n=this.updateSelectedAnno(e,v),this.pushHist(n,e.id,t,this.state.showSingleAnno),this.setState({annoToolBarVisible:!0});break;case"annoDeleted":n=this.updateSelectedAnno(e,"deleted"),this.selectAnnotation(void 0),this.showSingleAnno(void 0),this.pushHist(n,void 0,t,this.state.showSingleAnno);break;case"annoLabelUpdate":n=this.updateSelectedAnno(e,v),this.pushHist(n,e.id,t,void 0),this.setState({annoToolBarVisible:!0});break;case"annoCreatedNode":var o=this.mergeSelectedAnno(e,g);this.pushHist(o.newAnnos,e.id,t,this.state.showSingleAnno);break;case"annoCreatedFinalNode":n=this.updateSelectedAnno(e,v),this.pushHist(n,e.id,t,void 0),this.showSingleAnno(void 0),this.setState({annoToolBarVisible:!0});break;default:console.warn("Action not handeled",t)}}},{key:"onAnnoLabelInputUpdate",value:function onAnnoLabelInputUpdate(e){this.updateSelectedAnno(e)}},{key:"onAnnoLabelInputClose",value:function onAnnoLabelInputClose(){this.svg.current.focus(),this.showLabelInput(!1),this.showSingleAnno(void 0);var e=this.findAnno(this.state.selectedAnnoId);this.onAnnoPerformedAction(e,"annoLabelUpdate")}},{key:"handleImgBarClose",value:function handleImgBarClose(){this.props.onImgBarClose&&this.props.onImgBarClose()}},{key:"handleImgLabelUpdate",value:function handleImgLabelUpdate(e){this.setState({imgLabelIds:e,imgLabelChanged:!0}),this.pushHist(this.state.annos,this.state.selectedAnnoId,"imgLabelUpdate",this.state.showSingleAnno,e)}},{key:"handleCanvasClick",value:function handleCanvasClick(e){this.props.imgBarVisible&&this.setState({imgBarVisible:!0})}},{key:"handleImgBarMouseEnter",value:function handleImgBarMouseEnter(e){this.setState({imgBarVisible:!1})}},{key:"handleImgLabelInputClose",value:function handleImgLabelInputClose(){this.props.onImgLabelInputClose&&this.props.onImgLabelInputClose()}},{key:"handleSvgMouseMove",value:function handleSvgMouseMove(e){this.mousePosAbs=getMousePositionAbs(e,this.state.svg)}},{key:"handleNotification",value:function handleNotification(e){this.props.onNotification&&this.props.onNotification(e)}},{key:"updatePossibleLabels",value:function updatePossibleLabels(){if(this.props.possibleLabels&&!(this.props.possibleLabels.length<=0)){var e=this.props.possibleLabels;"color"in e[0]||(e=e.map(function(e){return Object(a.a)({},e,{color:function colorlut_getColor(e){return e?D[e%j]:getDefaultColor()}(e.id)})})),this.setState({possibleLabels:Object(o.a)(e)})}}},{key:"editAnnoLabel",value:function editAnnoLabel(){if(this.state.selectedAnnoId){var e=this.findAnno(this.state.selectedAnnoId);this.showLabelInput(),this.updateSelectedAnno(e,"editLabel")}}},{key:"unloadImage",value:function unloadImage(){this.state.imageLoaded&&this.setState({imageLoaded:!1})}},{key:"findAnno",value:function findAnno(e){return this.state.annos.find(function(t){return t.id===e})}},{key:"pushHist",value:function pushHist(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.state.imgLabelIds;this.hist.push(Object(a.a)({},this.getAnnos(e,!1),{selectedAnnoId:t,showSingleAnno:o,imgLabelIds:s}),n)}},{key:"undo",value:function undo(){if(!this.hist.isEmpty()){var e=this.hist.undo();this.setCanvasState(e.entry.annotations,e.entry.imgLabelIds,e.entry.selectedAnnoId,e.entry.showSingleAnno)}}},{key:"redo",value:function redo(){if(!this.hist.isEmpty()){var e=this.hist.redo();this.setCanvasState(e.entry.annotations,e.entry.imgLabelIds,e.entry.selectedAnnoId,e.entry.showSingleAnno)}}},{key:"deleteAllAnnos",value:function deleteAllAnnos(){var e=[];this.state.annos.forEach(function(t){"string"!==typeof t.id&&e.push(Object(a.a)({},t,{status:"deleted"}))}),this.pushHist(e,void 0,"deletedAllAnnos",this.state.showSingleAnno,this.state.imgLabelIds),this.setState({annos:e}),this.selectAnnotation(void 0),this.showSingleAnno(void 0)}},{key:"setCanvasState",value:function setCanvasState(e,t,n,s){this.updateCanvasView(Object(a.a)({},e)),this.setImageLabels(Object(o.a)(t)),this.selectAnnotation(n),this.setState({showSingleAnno:s})}},{key:"selectAnnotation",value:function selectAnnotation(e){if(e){var t=this.findAnno(e);this.setState({selectedAnnoId:e}),t&&t.mode!==g&&this.setState({annoToolBarVisible:!0})}else this.setState({selectedAnnoId:void 0,annoToolBarVisible:!1}),this.state.showLabelInput&&this.onAnnoLabelInputClose();if(this.props.onAnnoSelect){var n=this.findAnno(e);this.props.onAnnoSelect(n)}}},{key:"traverseAnnos",value:function traverseAnnos(){var e=this;if(this.state.annos.length>0){var t=this.state.annos.filter(function(e){return"deleted"!==e.status});if(t.length>0)if(this.state.selectedAnnoId){var n=t.findIndex(function(t){return t.id===e.state.selectedAnnoId});n+1<t.length?this.selectAnnotation(t[n+1].id):this.selectAnnotation(t[0].id)}else this.selectAnnotation(t[0].id)}}},{key:"getAnnoBackendFormat",value:function getAnnoBackendFormat(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=(n||this.state.annos).map(function(n){var o;return o=t&&"string"===typeof n.id?void 0:n.id,Object(a.a)({},n,{id:o,labelValue:n.labelValue,mode:v,data:f.g(n.data,e.state.svg,n.type)})});return{bBoxes:o.filter(function(e){return"bBox"===e.type}),lines:o.filter(function(e){return"line"===e.type}),points:o.filter(function(e){return"point"===e.type}),polygons:o.filter(function(e){return"polygon"===e.type})}}},{key:"getAnnos",value:function getAnnos(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e||this.state.annos,o=this.getAnnoBackendFormat(t,n);return{imgId:this.props.annos.image.id,imgLabelIds:this.state.imgLabelIds,imgLabelChanged:this.state.imgLabelChanged,annotations:o,isJunk:this.state.isJunk,labelValue:this.state.labelValue}}},{key:"resetZoom",value:function resetZoom(){this.setState({svg:Object(a.a)({},this.state.svg,{translateX:0,translateY:0,scale:1})})}},{key:"moveCamera",value:function moveCamera(e,t){var n=this.state.svg.translateX+e/this.state.svg.scale,o=this.state.svg.translateY+t/this.state.svg.scale,s=.25*this.state.svg.width,i=.75*this.state.svg.width,r=.25*this.state.svg.height,l=.75*this.state.svg.height,c=getViewportCoordinates({x:0,y:0},this.state.svg),u=getViewportCoordinates({x:this.state.svg.width,y:this.state.svg.height},this.state.svg);c.vX>=s?n=this.state.svg.translateX-5:u.vX<=i&&(n=this.state.svg.translateX+5),c.vY>=r?o=this.state.svg.translateY-5:u.vY<=l&&(o=this.state.svg.translateY+5),this.setState({svg:Object(a.a)({},this.state.svg,{translateX:n,translateY:o})})}},{key:"setMode",value:function setMode(e){this.state.mode!==e&&this.setState({mode:e})}},{key:"getMousePosition",value:function getMousePosition(e){var t=this.getMousePositionAbs(e);return{x:t.x/this.state.svg.scale-this.state.svg.translateX,y:t.y/this.state.svg.scale-this.state.svg.translateY}}},{key:"getMousePositionAbs",value:function getMousePositionAbs(e){return{x:e.pageX-this.svg.current.getBoundingClientRect().left,y:e.pageY-this.svg.current.getBoundingClientRect().top}}},{key:"showLabelInput",value:function showLabelInput(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({showLabelInput:e}),e&&this.showSingleAnno(this.state.selectedAnnoId)}},{key:"createNewAnnotation",value:function createNewAnnotation(e){if(!this.keyMapper.controlDown)if(this.props.selectedTool){var t=this.getMousePosition(e),n={id:h.a.uniqueId("new"),type:this.props.selectedTool,data:[{x:t.x,y:t.y},{x:t.x,y:t.y}],mode:g,status:E,labelIds:this.state.prevLabel,selectedNode:1,labelValue:""};if(this.setState({annos:Object(o.a)(this.state.annos).concat([n]),selectedAnnoId:n.id,showSingleAnno:n.id,annoToolBarVisible:!1}),this.props.selectedTool!==q.a&&this.props.selectedTool!==q.c){var a=this.mergeSelectedAnno(n);this.pushHist(a.newAnnos,n.id,"annoCreatedNode",n.id)}}else console.warn("No annotation tool selected!"),this.handleNotification({title:"No tool selected!",message:"Please select an annotation tool in the toolbar.",type:N.b})}},{key:"putSelectedOnTop",value:function putSelectedOnTop(e){var t=this;if(this.state.selectedAnnoId&&e.selectedAnnoId!==this.state.selectedAnnoId){var n=this.state.annos.filter(function(e){return e.id!==t.state.selectedAnnoId}),a=this.state.annos.find(function(e){return e.id===t.state.selectedAnnoId});n.push(a),this.setState({annos:Object(o.a)(n)})}}},{key:"getLabel",value:function getLabel(e){return this.state.possibleLabels.find(function(t){return t.id===e})}},{key:"getAnnoColor",value:function getAnnoColor(){if(this.state.selectedAnnoId){var e=this.findAnno(this.state.selectedAnnoId);if(e&&e.labelIds.length>0)return this.getLabel(e.labelIds[0]).color}return getDefaultColor()}},{key:"updateSelectedAnno",value:function updateSelectedAnno(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e){var n=this.mergeSelectedAnno(e,t),o=n.newAnnos,a=n.newAnno;return this.setState({annos:o,selectedAnnoId:e.id,prevLabel:e.labelIds}),this.props.onAnnoSelect&&null!==a&&this.props.onAnnoSelect(a),o}}},{key:"mergeSelectedAnno",value:function mergeSelectedAnno(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=this.state.annos.filter(function(t){return t.id!==e.id});return n?(t=Object(a.a)({},e,{mode:n}),t="deleted"===n?e.status!==E?Object(a.a)({},t,{status:"deleted"}):null:Object(a.a)({},t,{status:e.status!==E?"changed":E})):t=Object(a.a)({},e),null!==t&&s.push(t),{newAnnos:Object(o.a)(s),newAnno:t}}},{key:"showSingleAnno",value:function showSingleAnno(e){this.state.showSingleAnno!==e&&this.setState({showSingleAnno:e})}},{key:"updateImageSize",value:function updateImageSize(){var e,t,n,o,s=this.props.container.current.getBoundingClientRect(),i=document.documentElement.clientHeight;this.props.layoutOffset?(e=s.top+this.props.layoutOffset.top,t=s.left+this.props.layoutOffset.left,n=i-s.top-this.props.layoutOffset.bottom-this.props.layoutOffset.top,o=s.right-t-this.props.layoutOffset.right-240):(e=s.top,t=s.left,n=i-s.top,o=s.right-t-240);var r=this.img.current.naturalWidth/this.img.current.naturalHeight,l="100%",c="100%";if(n*r>o?(l=o,c=o/r):(l=n*r,c=n),this.props.centerCanvasInContainer){var u=o-l;u>2&&(t+=u/2);var p=n-c;p>2&&(e+=p/2)}var d=Object(a.a)({},this.state.svg,{width:l,height:c,left:t,top:e});return this.setState({svg:d,image:{width:this.img.current.naturalWidth,height:this.img.current.naturalHeight}}),this.svgUpdate(d),{imgWidth:l,imgHeight:c}}},{key:"svgUpdate",value:function svgUpdate(e){this.props.onSVGUpdate&&this.props.onSVGUpdate(e)}},{key:"setImageLabels",value:function setImageLabels(e){e!==this.state.imgLabelIds&&this.setState({imgLabelIds:e})}},{key:"updateCanvasView",value:function updateCanvasView(e){var t=[];if(e){var n=this.updateImageSize();t=(t=Object(o.a)(e.bBoxes.map(function(e){return Object(a.a)({},e,{type:"bBox",mode:e.mode?e.mode:v,status:e.status?e.status:"database"})})).concat(Object(o.a)(e.lines.map(function(e){return Object(a.a)({},e,{type:"line",mode:e.mode?e.mode:v,status:e.status?e.status:"database"})})),Object(o.a)(e.polygons.map(function(e){return Object(a.a)({},e,{type:"polygon",mode:e.mode?e.mode:v,status:e.status?e.status:"database"})})),Object(o.a)(e.points.map(function(e){return Object(a.a)({},e,{type:"point",mode:e.mode?e.mode:v,status:e.status?e.status:"database"})})))).map(function(e){return Object(a.a)({},e,{data:f.h(e.data,{width:n.imgWidth,height:n.imgHeight},e.type)})}),this.setState({annos:Object(o.a)(t)})}}},{key:"renderAnnotations",value:function renderAnnotations(){var e=this;if("cameraMove"!==this.state.mode){var t=this.state.annos.map(function(t){return p.a.createElement(L,{type:t.type,data:t,key:t.id,svg:Object(a.a)({},e.state.svg),onMouseDown:function onMouseDown(t){return e.onAnnoMouseDown(t)},onAction:function onAction(t,n){return e.onAnnoPerformedAction(t,n)},selectedAnno:e.state.selectedAnnoId,showSingleAnno:e.state.showSingleAnno,uiConfig:e.props.uiConfig,allowedActions:e.props.canvasConfig.annos.actions,possibleLabels:e.state.possibleLabels,image:e.state.image,canvasConfig:e.props.canvasConfig,onNotification:function onNotification(t){return e.handleNotification(t)},defaultLabel:e.props.defaultLabel})});return p.a.createElement("g",null,t)}return null}},{key:"renderImgLabelInput",value:function renderImgLabelInput(){var e=this;return this.props.annos.image?p.a.createElement(V.a,{onClick:function onClick(){return e.handleImgLabelInputClose()},active:this.props.imgLabelInputVisible,header:p.a.createElement("div",null,"Add label for the whole image"),content:p.a.createElement("div",null,p.a.createElement(B,{multilabels:this.props.canvasConfig.img.multilabels,visible:!0,onLabelUpdate:function onLabelUpdate(t){return e.handleImgLabelUpdate(t)},possibleLabels:this.state.possibleLabels,initLabelIds:this.state.imgLabelIds,relatedId:this.props.annos.image.id,defaultLabel:this.props.defaultLabel}),p.a.createElement(G.a,{basic:!0,color:"green",inverted:!0,onClick:function onClick(){return e.handleImgLabelInputClose()}},p.a.createElement(X.a,{name:"check"}),"OK"))}):null}},{key:"renderAnnoToolBar",value:function renderAnnoToolBar(e){var t=this,n=this.state.annoToolBarVisible;return"cameraMove"===this.state.mode&&(n=!1),p.a.createElement(W,{visible:n,selectedAnno:e,svg:this.state.svg,onClick:function onClick(){return t.editAnnoLabel()},color:this.getAnnoColor()})}},{key:"renderAnnoLabelInpput",value:function renderAnnoLabelInpput(e){var t=this,n=this.state.showLabelInput;return"cameraMove"===this.state.mode&&(n=!1),p.a.createElement(H,{svg:this.state.svg,onClose:function onClose(){return t.onAnnoLabelInputClose()},onDeleteClick:function onDeleteClick(e){return t.onLabelInputDeleteClick(e)},selectedAnno:e,visible:n,onLabelUpdate:function onLabelUpdate(e){return t.onAnnoLabelInputUpdate(e)},possibleLabels:this.state.possibleLabels,allowedActions:this.props.canvasConfig.annos.actions,multilabels:this.props.canvasConfig.annos.multilabels,mousePos:this.mousePosAbs,defaultLabel:this.props.defaultLabel})}},{key:"renderFieldTable",value:function renderFieldTable(){var e=this;return p.a.createElement(re,{annos:this.state.annos,svg:this.state.svg,possibleLabels:this.state.possibleLabels,updateSelectedAnno:function updateSelectedAnno(t){return e.updateSelectedAnno(t)},selectAnnotation:function selectAnnotation(t){return e.selectAnnotation(t)}})}},{key:"render",value:function render(){var e=this,t=this.findAnno(this.state.selectedAnnoId);return p.a.createElement("div",{ref:this.container},p.a.createElement("div",{height:this.state.svg.height,style:{position:"fixed",top:this.state.svg.top,left:this.state.svg.left}},this.renderImgLabelInput(),p.a.createElement(_,{container:this.container,visible:this.state.imgBarVisible,possibleLabels:this.state.possibleLabels,annos:this.props.annos,svg:this.state.svg,onClose:function onClose(){return e.handleImgBarClose()},imgLabelIds:this.state.imgLabelIds,onMouseEnter:function onMouseEnter(t){return e.handleImgBarMouseEnter(t)}}),p.a.createElement(z.a,{active:!this.state.imageLoaded},p.a.createElement(ae,null,"Loading")),p.a.createElement(z.a,{active:this.state.isJunk},p.a.createElement(U.a,{as:"h2",icon:!0,inverted:!0},p.a.createElement(X.a,{name:"ban"}),"Marked as Junk")),this.renderAnnoToolBar(t),this.renderAnnoLabelInpput(t),p.a.createElement("svg",{ref:this.svg,width:this.state.svg.width,height:this.state.svg.height,onKeyDown:function onKeyDown(t){return e.onKeyDown(t)},onKeyUp:function onKeyUp(t){return e.onKeyUp(t)},onClick:function onClick(t){return e.handleCanvasClick(t)},onMouseMove:function onMouseMove(t){return e.handleSvgMouseMove(t)},tabIndex:"0"},p.a.createElement("g",{transform:"scale(".concat(this.state.svg.scale,") translate(").concat(this.state.svg.translateX,", ").concat(this.state.svg.translateY,")"),onMouseOver:function onMouseOver(){e.onMouseOver()},onMouseUp:function onMouseUp(t){e.onMouseUp(t)},onWheel:function onWheel(t){e.onWheel(t)},onMouseMove:function onMouseMove(t){e.onMouseMove(t)}},p.a.createElement("image",{onContextMenu:function onContextMenu(t){return e.onRightClick(t)},onMouseDown:function onMouseDown(t){return e.onMouseDown(t)},href:this.props.image.data,width:this.state.svg.width,height:this.state.svg.height}),this.renderAnnotations())),p.a.createElement("img",{alt:"sia",style:{display:"none"},ref:this.img,onLoad:function onLoad(){e.onImageLoad()},src:this.state.imageData,width:"100%",height:"100%"})),this.renderFieldTable(),p.a.createElement("div",{style:{minHeight:this.state.svg.height}}))}}]),Canvas}(u.Component);t.a=le},914:function(e,t,n){"use strict";var o=n(421),a=n.n(o),s=n(4),i=n.n(s),r=(n(0),n(1)),l=n.n(r),c=n(465),u=n(704),p=n(705),d=n(422);function Divider(e){var t=e.children,n=e.className,o=e.clearing,s=e.content,r=e.fitted,h=e.hidden,f=e.horizontal,v=e.inverted,m=e.section,g=e.vertical,b=i()("ui",Object(c.a)(o,"clearing"),Object(c.a)(r,"fitted"),Object(c.a)(h,"hidden"),Object(c.a)(f,"horizontal"),Object(c.a)(v,"inverted"),Object(c.a)(m,"section"),Object(c.a)(g,"vertical"),"divider",n),y=Object(u.a)(Divider,e),k=Object(p.a)(Divider,e);return l.a.createElement(k,a()({},y,{className:b}),d.a.isNil(t)?s:t)}Divider.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],Divider.propTypes={},t.a=Divider},972:function(e,t,n){"use strict";var o=n(421),a=n.n(o),s=n(439),i=n.n(s),r=n(425),l=n.n(r),c=n(426),u=n.n(c),p=n(428),d=n.n(p),h=n(427),f=n.n(h),v=n(424),m=n.n(v),g=n(429),b=n.n(g),y=n(423),k=n.n(y),C=n(152),M=n.n(C),w=n(144),S=n.n(w),A=n(431),O=n.n(A),I=n(44),x=n.n(I),E=n(524),D=n.n(E),j=n(466),N=n.n(j),L=n(521),P=n.n(L),T=(n(432),n(459)),U=n.n(T),R=n(4),B=n.n(R),H=(n(0),n(1)),F=n.n(H),_=n(645),V=n.n(_),W=n(486),K=n.n(W),q=n(143),Y=n(646),G=n.n(Y)()({setReferenceNode:void 0,referenceNode:void 0}),X=(H.Component,function unwrapArray(e){return Array.isArray(e)?e[0]:e}),z=function safeInvoke(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.apply(void 0,n)}},J={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},Z={},$=function(e){function InnerPopper(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,k()(m()(m()(t)),"state",{data:void 0,placement:void 0}),k()(m()(m()(t)),"popperInstance",void 0),k()(m()(m()(t)),"popperNode",null),k()(m()(m()(t)),"arrowNode",null),k()(m()(m()(t)),"setPopperNode",function(e){e&&t.popperNode!==e&&(z(t.props.innerRef,e),t.popperNode=e,t.updatePopperInstance())}),k()(m()(m()(t)),"setArrowNode",function(e){t.arrowNode=e}),k()(m()(m()(t)),"updateStateModifier",{enabled:!0,order:900,fn:function fn(e){var n=e.placement;return t.setState({data:e,placement:n}),e}}),k()(m()(m()(t)),"getOptions",function(){return{placement:t.props.placement,eventsEnabled:t.props.eventsEnabled,positionFixed:t.props.positionFixed,modifiers:a()({},t.props.modifiers,{arrow:a()({},t.props.modifiers&&t.props.modifiers.arrow,{enabled:!!t.arrowNode,element:t.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:t.updateStateModifier})}}),k()(m()(m()(t)),"getPopperStyle",function(){return t.popperNode&&t.state.data?a()({position:t.state.data.offsets.popper.position},t.state.data.styles):J}),k()(m()(m()(t)),"getPopperPlacement",function(){return t.state.data?t.state.placement:void 0}),k()(m()(m()(t)),"getArrowStyle",function(){return t.arrowNode&&t.state.data?t.state.data.arrowStyles:Z}),k()(m()(m()(t)),"getOutOfBoundariesState",function(){return t.state.data?t.state.data.hide:void 0}),k()(m()(m()(t)),"destroyPopperInstance",function(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)}),k()(m()(m()(t)),"updatePopperInstance",function(){t.destroyPopperInstance();var e=m()(m()(t)).popperNode,n=t.props.referenceElement;n&&e&&(t.popperInstance=new q.a(n,e,t.getOptions()))}),k()(m()(m()(t)),"scheduleUpdate",function(){t.popperInstance&&t.popperInstance.scheduleUpdate()}),t}K()(InnerPopper,e);var t=InnerPopper.prototype;return t.componentDidUpdate=function componentDidUpdate(e,t){this.props.placement!==e.placement||this.props.referenceElement!==e.referenceElement||this.props.positionFixed!==e.positionFixed?this.updatePopperInstance():this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()),t.placement!==this.state.placement&&this.scheduleUpdate()},t.componentWillUnmount=function componentWillUnmount(){z(this.props.innerRef,null),this.destroyPopperInstance()},t.render=function render(){return X(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},InnerPopper}(H.Component);k()($,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});q.a.placements;function Popper(e){var t=e.referenceElement,n=V()(e,["referenceElement"]);return H.createElement(G.Consumer,null,function(e){var o=e.referenceNode;return H.createElement($,a()({referenceElement:void 0!==t?t:o},n))})}var Q=n(30),ee=n.n(Q);H.Component;var te=n(525),ne=n.n(te),oe=n(651),ae=n(465),se=n(705),ie=n(422),re=n(704),le=n(982),ce=n(978),ue=n(652),pe=n.n(ue),de=n(113),he={"top center":"top","top left":"top-start","top right":"top-end","bottom center":"bottom","bottom left":"bottom-start","bottom right":"bottom-end","right center":"right","left center":"left"},fe=(n.n(de)()(he),pe()(he)),ve=n(240),me=n.n(ve),ge=n(453),be=function(){function ReferenceProxy(e){l()(this,ReferenceProxy),this.ref=e}return u()(ReferenceProxy,[{key:"getBoundingClientRect",value:function getBoundingClientRect(){return O()(this.ref.current,"getBoundingClientRect",{})}},{key:"clientWidth",get:function get(){return this.getBoundingClientRect().width}},{key:"clientHeight",get:function get(){return this.getBoundingClientRect().height}},{key:"parentNode",get:function get(){return this.ref.current?this.ref.current.parentNode:void 0}}]),ReferenceProxy}(),ye=me()(function(e){return new be(Object(ge.b)(e)?e:{current:e})}),ke=n(706);function PopupContent(e){var t=e.children,n=e.className,o=e.content,s=B()("content",n),i=Object(re.a)(PopupContent,e),r=Object(se.a)(PopupContent,e);return F.a.createElement(r,a()({},i,{className:s}),ie.a.isNil(t)?o:t)}function PopupHeader(e){var t=e.children,n=e.className,o=e.content,s=B()("header",n),i=Object(re.a)(PopupHeader,e),r=Object(se.a)(PopupHeader,e);return F.a.createElement(r,a()({},i,{className:s}),ie.a.isNil(t)?o:t)}PopupContent.handledProps=["as","children","className","content"],PopupContent.propTypes={},PopupContent.create=Object(ke.e)(PopupContent,function(e){return{children:e}}),PopupHeader.handledProps=["as","children","className","content"],PopupHeader.propTypes={},PopupHeader.create=Object(ke.e)(PopupHeader,function(e){return{children:e}}),n.d(t,"a",function(){return Ce});var Ce=function(e){function Popup(){var e,t;l()(this,Popup);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=d()(this,(e=f()(Popup)).call.apply(e,[this].concat(o))),k()(m()(t),"state",{}),k()(m()(t),"open",!1),k()(m()(t),"triggerRef",Object(H.createRef)()),k()(m()(t),"getPortalProps",function(){var e={},n=t.props,o=n.on,a=n.hoverable,s=x()(o)?o:[o];return a&&(e.closeOnPortalMouseLeave=!0,e.mouseLeaveDelay=300),N()(s,"click")&&(e.openOnTriggerClick=!0,e.closeOnTriggerClick=!0,e.closeOnDocumentClick=!0),N()(s,"focus")&&(e.openOnTriggerFocus=!0,e.closeOnTriggerBlur=!0),N()(s,"hover")&&(e.openOnTriggerMouseEnter=!0,e.closeOnTriggerMouseLeave=!0,e.mouseLeaveDelay=70,e.mouseEnterDelay=50),e}),k()(m()(t),"hideOnScroll",function(e){t.setState({closed:!0}),oe.a.unsub("scroll",t.hideOnScroll,{target:window}),t.timeoutId=setTimeout(function(){t.setState({closed:!1})},50),t.handleClose(e)}),k()(m()(t),"handleClose",function(e){O()(t.props,"onClose",e,t.props)}),k()(m()(t),"handleOpen",function(e){O()(t.props,"onOpen",e,t.props)}),k()(m()(t),"handlePortalMount",function(e){O()(t.props,"onMount",e,t.props)}),k()(m()(t),"handlePortalUnmount",function(e){t.positionUpdate=null,O()(t.props,"onUnmount",e,t.props)}),k()(m()(t),"renderContent",function(e){var n=e.placement,o=e.ref,s=e.scheduleUpdate,r=e.style,l=t.props,c=l.basic,u=l.children,p=l.className,d=l.content,h=l.hideOnScroll,f=l.flowing,v=l.header,m=l.inverted,g=l.size,b=l.style,y=l.wide,k=t.state.contentRestProps;t.positionUpdate=s;var C=B()("ui",fe[n],g,Object(ae.b)(y,"wide"),Object(ae.a)(c,"basic"),Object(ae.a)(f,"flowing"),Object(ae.a)(m,"inverted"),"popup transition visible",p),M=Object(se.a)(Popup,t.props),w=i()({left:"auto",right:"auto"},r,b);return F.a.createElement(ce.a,{innerRef:o},F.a.createElement(M,a()({},k,{className:C,style:w}),ie.a.isNil(u)?F.a.createElement(F.a.Fragment,null,PopupHeader.create(v,{autoGenerateKey:!1}),PopupContent.create(d,{autoGenerateKey:!1})):u,h&&F.a.createElement(U.a,{on:t.hideOnScroll,name:"scroll",target:"window"})))}),t}return b()(Popup,e),u()(Popup,[{key:"componentDidUpdate",value:function componentDidUpdate(e){ne()(this.props.popperDependencies,e.popperDependencies)||this.handleUpdate()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeoutId)}},{key:"handleUpdate",value:function handleUpdate(){this.positionUpdate&&this.positionUpdate()}},{key:"render",value:function render(){var e=this.props,t=e.context,n=e.disabled,o=e.offset,s=e.pinned,r=e.popperModifiers,l=e.position,c=e.trigger,u=this.state,p=u.closed,d=u.portalRestProps;if(p||n)return c;var h=S()({arrow:{enabled:!1},flip:{enabled:!s},keepTogether:{enabled:!!o},offset:{offset:o}},r),f=ye(M()(t)?this.triggerRef:t),v=i()({},this.getPortalProps(),d);return F.a.createElement(le.a,a()({},v,{onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount,trigger:c,triggerRef:this.triggerRef}),F.a.createElement(Popper,{modifiers:h,placement:he[l],referenceElement:f},this.renderContent))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(e,t){if(t.closed||t.disabled)return{};var n=Object(re.a)(Popup,e);return{contentRestProps:P()(n,function(e,t,n){return N()(le.a.handledProps,n)||(e[n]=t),e},{}),portalRestProps:D()(n,le.a.handledProps)}}}]),Popup}(H.Component);k()(Ce,"defaultProps",{disabled:!1,offset:0,on:"hover",pinned:!1,position:"top left"}),k()(Ce,"Content",PopupContent),k()(Ce,"Header",PopupHeader),k()(Ce,"handledProps",["as","basic","children","className","content","context","disabled","flowing","header","hideOnScroll","hoverable","inverted","offset","on","onClose","onMount","onOpen","onUnmount","pinned","popperDependencies","popperModifiers","position","size","style","trigger","wide"]),Ce.propTypes={}},974:function(e,t,n){"use strict";var o=n(421),a=n.n(o),s=n(425),i=n.n(s),r=n(426),l=n.n(r),c=n(428),u=n.n(c),p=n(427),d=n.n(p),h=n(424),f=n.n(h),v=n(429),m=n.n(v),g=n(423),b=n.n(g),y=n(4),k=n.n(y),C=(n(0),n(1)),M=n.n(C),w=n(465),S=n(704),A=n(705),O=n(422),I=n(672),x=(n(432),n(706));function CardDescription(e){var t=e.children,n=e.className,o=e.content,s=e.textAlign,i=k()(Object(w.d)(s),"description",n),r=Object(S.a)(CardDescription,e),l=Object(A.a)(CardDescription,e);return M.a.createElement(l,a()({},r,{className:i}),O.a.isNil(t)?o:t)}CardDescription.handledProps=["as","children","className","content","textAlign"],CardDescription.propTypes={};var E=CardDescription;function CardHeader(e){var t=e.children,n=e.className,o=e.content,s=e.textAlign,i=k()(Object(w.d)(s),"header",n),r=Object(S.a)(CardHeader,e),l=Object(A.a)(CardHeader,e);return M.a.createElement(l,a()({},r,{className:i}),O.a.isNil(t)?o:t)}CardHeader.handledProps=["as","children","className","content","textAlign"],CardHeader.propTypes={};var D=CardHeader;function CardMeta(e){var t=e.children,n=e.className,o=e.content,s=e.textAlign,i=k()(Object(w.d)(s),"meta",n),r=Object(S.a)(CardMeta,e),l=Object(A.a)(CardMeta,e);return M.a.createElement(l,a()({},r,{className:i}),O.a.isNil(t)?o:t)}CardMeta.handledProps=["as","children","className","content","textAlign"],CardMeta.propTypes={};var j=CardMeta;function CardContent(e){var t=e.children,n=e.className,o=e.content,s=e.description,i=e.extra,r=e.header,l=e.meta,c=e.textAlign,u=k()(Object(w.a)(i,"extra"),Object(w.d)(c),"content",n),p=Object(S.a)(CardContent,e),d=Object(A.a)(CardContent,e);return O.a.isNil(t)?O.a.isNil(o)?M.a.createElement(d,a()({},p,{className:u}),Object(x.d)(D,function(e){return{content:e}},r,{autoGenerateKey:!1}),Object(x.d)(j,function(e){return{content:e}},l,{autoGenerateKey:!1}),Object(x.d)(E,function(e){return{content:e}},s,{autoGenerateKey:!1})):M.a.createElement(d,a()({},p,{className:u}),o):M.a.createElement(d,a()({},p,{className:u}),t)}CardContent.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],CardContent.propTypes={};var N=CardContent,L=n(441),P=n.n(L);function CardGroup(e){var t=e.centered,n=e.children,o=e.className,s=e.content,i=e.doubling,r=e.items,l=e.itemsPerRow,c=e.stackable,u=e.textAlign,p=k()("ui",Object(w.a)(t,"centered"),Object(w.a)(i,"doubling"),Object(w.a)(c,"stackable"),Object(w.d)(u),Object(w.g)(l),"cards",o),d=Object(S.a)(CardGroup,e),h=Object(A.a)(CardGroup,e);if(!O.a.isNil(n))return M.a.createElement(h,a()({},d,{className:p}),n);if(!O.a.isNil(s))return M.a.createElement(h,a()({},d,{className:p}),s);var f=P()(r,function(e){var t=e.key||[e.header,e.description].join("-");return M.a.createElement(U,a()({key:t},e))});return M.a.createElement(h,a()({},d,{className:p}),f)}CardGroup.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],CardGroup.propTypes={};var T=CardGroup;n.d(t,"a",function(){return U});var U=function(e){function Card(){var e,t;i()(this,Card);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=u()(this,(e=d()(Card)).call.apply(e,[this].concat(o))),b()(f()(t),"handleClick",function(e){var n=t.props.onClick;n&&n(e,t.props)}),t}return m()(Card,e),l()(Card,[{key:"render",value:function render(){var e=this.props,t=e.centered,n=e.children,o=e.className,s=e.color,i=e.content,r=e.description,l=e.extra,c=e.fluid,u=e.header,p=e.href,d=e.image,h=e.link,f=e.meta,v=e.onClick,m=e.raised,g=k()("ui",s,Object(w.a)(t,"centered"),Object(w.a)(c,"fluid"),Object(w.a)(h,"link"),Object(w.a)(m,"raised"),"card",o),b=Object(S.a)(Card,this.props),y=Object(A.a)(Card,this.props,function(){if(v)return"a"});return O.a.isNil(n)?O.a.isNil(i)?M.a.createElement(y,a()({},b,{className:g,href:p,onClick:this.handleClick}),I.a.create(d,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(r||u||f)&&M.a.createElement(N,{description:r,header:u,meta:f}),l&&M.a.createElement(N,{extra:!0},l)):M.a.createElement(y,a()({},b,{className:g,href:p,onClick:this.handleClick}),i):M.a.createElement(y,a()({},b,{className:g,href:p,onClick:this.handleClick}),n)}}]),Card}(C.Component);b()(U,"Content",N),b()(U,"Description",E),b()(U,"Group",T),b()(U,"Header",D),b()(U,"Meta",j),b()(U,"handledProps",["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"]),U.propTypes={}},976:function(e,t,n){"use strict";var o=n(421),a=n.n(o),s=n(425),i=n.n(s),r=n(426),l=n.n(r),c=n(428),u=n.n(c),p=n(427),d=n.n(p),h=n(424),f=n.n(h),v=n(429),m=n.n(v),g=n(423),b=n.n(g),y=n(441),k=n.n(y),C=n(431),M=n.n(C),w=(n(432),n(4)),S=n.n(w),A=(n(0),n(1)),O=n.n(A),I=n(465),x=n(704),E=n(705),D=n(422),j=n(592),N=n(706);function MenuHeader(e){var t=e.children,n=e.className,o=e.content,s=S()("header",n),i=Object(x.a)(MenuHeader,e),r=Object(E.a)(MenuHeader,e);return O.a.createElement(r,a()({},i,{className:s}),D.a.isNil(t)?o:t)}MenuHeader.handledProps=["as","children","className","content"],MenuHeader.propTypes={};var L=MenuHeader,P=n(655),T=n.n(P),U=n(68),R=function(e){function MenuItem(){var e,t;i()(this,MenuItem);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=u()(this,(e=d()(MenuItem)).call.apply(e,[this].concat(o))),b()(f()(t),"handleClick",function(e){t.props.disabled||M()(t.props,"onClick",e,t.props)}),t}return m()(MenuItem,e),l()(MenuItem,[{key:"render",value:function render(){var e=this.props,t=e.active,n=e.children,o=e.className,s=e.color,i=e.content,r=e.disabled,l=e.fitted,c=e.header,u=e.icon,p=e.link,d=e.name,h=e.onClick,f=e.position,v=S()(s,f,Object(I.a)(t,"active"),Object(I.a)(r,"disabled"),Object(I.a)(!0===u||u&&!(d||i),"icon"),Object(I.a)(c,"header"),Object(I.a)(p,"link"),Object(I.b)(l,"fitted"),"item",o),m=Object(E.a)(MenuItem,this.props,function(){if(h)return"a"}),g=Object(x.a)(MenuItem,this.props);return D.a.isNil(n)?O.a.createElement(m,a()({},g,{className:v,onClick:this.handleClick}),U.a.create(u,{autoGenerateKey:!1}),D.a.isNil(i)?T()(d):i):O.a.createElement(m,a()({},g,{className:v,onClick:this.handleClick}),n)}}]),MenuItem}(A.Component);function MenuMenu(e){var t=e.children,n=e.className,o=e.content,s=e.position,i=S()(s,"menu",n),r=Object(x.a)(MenuMenu,e),l=Object(E.a)(MenuMenu,e);return O.a.createElement(l,a()({},r,{className:i}),D.a.isNil(t)?o:t)}b()(R,"handledProps",["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"]),R.propTypes={},R.create=Object(N.e)(R,function(e){return{content:e,name:e}}),MenuMenu.handledProps=["as","children","className","content","position"],MenuMenu.propTypes={};var B=MenuMenu,H=function(e){function Menu(){var e,t;i()(this,Menu);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=u()(this,(e=d()(Menu)).call.apply(e,[this].concat(o))),b()(f()(t),"handleItemOverrides",function(e){return{onClick:function onClick(n,o){var a=o.index;t.trySetState({activeIndex:a}),M()(e,"onClick",n,o),M()(t.props,"onItemClick",n,o)}}}),t}return m()(Menu,e),l()(Menu,[{key:"renderItems",value:function renderItems(){var e=this,t=this.props.items,n=this.state.activeIndex;return k()(t,function(t,o){return R.create(t,{defaultProps:{active:parseInt(n,10)===o,index:o},overrideProps:e.handleItemOverrides})})}},{key:"render",value:function render(){var e=this.props,t=e.attached,n=e.borderless,o=e.children,s=e.className,i=e.color,r=e.compact,l=e.fixed,c=e.floated,u=e.fluid,p=e.icon,d=e.inverted,h=e.pagination,f=e.pointing,v=e.secondary,m=e.size,g=e.stackable,b=e.tabular,y=e.text,k=e.vertical,C=e.widths,M=S()("ui",i,m,Object(I.a)(n,"borderless"),Object(I.a)(r,"compact"),Object(I.a)(u,"fluid"),Object(I.a)(d,"inverted"),Object(I.a)(h,"pagination"),Object(I.a)(f,"pointing"),Object(I.a)(v,"secondary"),Object(I.a)(g,"stackable"),Object(I.a)(y,"text"),Object(I.a)(k,"vertical"),Object(I.b)(t,"attached"),Object(I.b)(c,"floated"),Object(I.b)(p,"icon"),Object(I.b)(b,"tabular"),Object(I.e)(l,"fixed"),Object(I.g)(C,"item"),s,"menu"),w=Object(x.a)(Menu,this.props),A=Object(E.a)(Menu,this.props);return O.a.createElement(A,a()({},w,{className:M}),D.a.isNil(o)?this.renderItems():o)}}]),Menu}(j.a);b()(H,"autoControlledProps",["activeIndex"]),b()(H,"Header",L),b()(H,"Item",R),b()(H,"Menu",B),b()(H,"handledProps",["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"]),H.propTypes={},H.create=Object(N.e)(H,function(e){return{items:e}});t.a=H},979:function(e,t,n){"use strict";var o=n(421),a=n.n(o),s=(n(432),n(4)),i=n.n(s),r=(n(0),n(1)),l=n.n(r),c=n(465),u=n(704),p=n(705),d=n(422),h=n(68),f=n(672),v=n(706);function HeaderSubheader(e){var t=e.children,n=e.className,o=e.content,s=i()("sub header",n),r=Object(u.a)(HeaderSubheader,e),c=Object(p.a)(HeaderSubheader,e);return l.a.createElement(c,a()({},r,{className:s}),d.a.isNil(t)?o:t)}HeaderSubheader.handledProps=["as","children","className","content"],HeaderSubheader.propTypes={},HeaderSubheader.create=Object(v.e)(HeaderSubheader,function(e){return{content:e}});var m=HeaderSubheader;function HeaderContent(e){var t=e.children,n=e.className,o=e.content,s=i()("content",n),r=Object(u.a)(HeaderContent,e),c=Object(p.a)(HeaderContent,e);return l.a.createElement(c,a()({},r,{className:s}),d.a.isNil(t)?o:t)}HeaderContent.handledProps=["as","children","className","content"],HeaderContent.propTypes={};var g=HeaderContent;function Header(e){var t=e.attached,n=e.block,o=e.children,s=e.className,r=e.color,v=e.content,b=e.disabled,y=e.dividing,k=e.floated,C=e.icon,M=e.image,w=e.inverted,S=e.size,A=e.sub,O=e.subheader,I=e.textAlign,x=i()("ui",r,S,Object(c.a)(n,"block"),Object(c.a)(b,"disabled"),Object(c.a)(y,"dividing"),Object(c.e)(k,"floated"),Object(c.a)(!0===C,"icon"),Object(c.a)(!0===M,"image"),Object(c.a)(w,"inverted"),Object(c.a)(A,"sub"),Object(c.b)(t,"attached"),Object(c.d)(I),"header",s),E=Object(u.a)(Header,e),D=Object(p.a)(Header,e);if(!d.a.isNil(o))return l.a.createElement(D,a()({},E,{className:x}),o);var j=h.a.create(C,{autoGenerateKey:!1}),N=f.a.create(M,{autoGenerateKey:!1}),L=m.create(O,{autoGenerateKey:!1});return j||N?l.a.createElement(D,a()({},E,{className:x}),j||N,(v||L)&&l.a.createElement(g,null,v,L)):l.a.createElement(D,a()({},E,{className:x}),v,L)}Header.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],Header.propTypes={},Header.Content=g,Header.Subheader=m;t.a=Header}}]);
//# sourceMappingURL=7.6636e731.chunk.js.map